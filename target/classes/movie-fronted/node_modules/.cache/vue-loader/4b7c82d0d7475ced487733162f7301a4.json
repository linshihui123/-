{"remainingRequest":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\src\\components\\MovieBrowse.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\src\\components\\MovieBrowse.vue","mtime":1769418754902},{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1768463919512},{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\vue-loader\\lib\\index.js","mtime":1768463917873}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKaW1wb3J0IHsgcGFyc2VVc2VySW50ZW50LCBnZXRSZWNvbW1lbmRNb3ZpZXNQb3N0IH0gZnJvbSAnQC9hcGkvcmVjb21tZW5kJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNb3ZpZUJyb3dzZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdmllczogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTIsCiAgICAgIHRvdGFsOiAwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRUeXBlOiAnJywKICAgICAgY29tbWVudERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBjdXJyZW50TW92aWU6IG51bGwsCiAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgLy8gQUnliqnmiYvnm7jlhbPmlbDmja4KICAgICAgY2hhdE1lc3NhZ2VzOiBbCiAgICAgICAgewogICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICBjb250ZW50OiAn5oKo5aW977yB5oiR5pivQUnnlLXlvbHmjqjojZDliqnmiYvvvIzlj6/ku6XmoLnmja7mgqjnmoTllpzlpb3mjqjojZDnlLXlvbHjgILor7flkYror4nmiJHmgqjmg7PnnIvku4DkuYjnsbvlnovnmoTnlLXlvbHvvIzmiJbogIXlr7nlr7zmvJTjgIHmvJTlkZjmnInku4DkuYjlgY/lpb3lkJfvvJ8nCiAgICAgICAgfQogICAgICBdLAogICAgICB1c2VySW5wdXQ6ICcnLAogICAgICBhaUxvYWRpbmc6IGZhbHNlLAogICAgICBjdXJyZW50VXNlcjogbnVsbAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZEFsbE1vdmllcygpOwogICAgdGhpcy5jaGVja1VzZXJTZXNzaW9uKCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGNoYXRNZXNzYWdlczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuICRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrVXNlclNlc3Npb24oKSB7CiAgICAgIGNvbnN0IHVzZXJTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOwogICAgICBpZiAodXNlclN0cikgewogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfop6PmnpDnlKjmiLfkv6Hmga/lpLHotKUnLCBlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2Nyb2xsVG9Cb3R0b20oKSB7CiAgICAgIHRoaXMuICRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuICRyZWZzLmNoYXRNZXNzYWdlcykgewogICAgICAgICAgdGhpcy4gJHJlZnMuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IHRoaXMuICRyZWZzLmNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgZm9ybWF0TWVzc2FnZShjb250ZW50KSB7CiAgICAgIHJldHVybiBjb250ZW50LnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICB9LAoKICAgIHNldFF1aWNrUHJvbXB0KHByb21wdCkgewogICAgICB0aGlzLnVzZXJJbnB1dCA9IHByb21wdDsKICAgIH0sCgogICAgYXN5bmMgc2VuZFJlY29tbWVuZFJlcXVlc3QoKSB7CiAgICAgIGlmICghdGhpcy51c2VySW5wdXQudHJpbSgpKSB7CiAgICAgICAgdGhpcy4gJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5oKo55qE5o6o6I2Q6ZyA5rGCJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmNoYXRNZXNzYWdlcy5wdXNoKHsKICAgICAgICByb2xlOiAndXNlcicsCiAgICAgICAgY29udGVudDogdGhpcy51c2VySW5wdXQKICAgICAgfSk7CgogICAgICB0aGlzLmFpTG9hZGluZyA9IHRydWU7CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHVzZXJJZCA9IHRoaXMuY3VycmVudFVzZXIgPyB0aGlzLmN1cnJlbnRVc2VyLnVzZXJpZCB8fCB0aGlzLmN1cnJlbnRVc2VyLmlkIHx8IHRoaXMuY3VycmVudFVzZXIudXNlcklkIDogJ2Fub255bW91cyc7CgogICAgICAgIGNvbnN0IGludGVudFJlc3BvbnNlID0gYXdhaXQgcGFyc2VVc2VySW50ZW50KHsKICAgICAgICAgIHVzZXJJbnB1dDogdGhpcy51c2VySW5wdXQsCiAgICAgICAgICB1c2VySWQ6IHVzZXJJZAogICAgICAgIH0pOwoKICAgICAgICBpZiAoaW50ZW50UmVzcG9uc2UgJiYgaW50ZW50UmVzcG9uc2UuaW50ZW50VHlwZSkgewogICAgICAgICAgY29uc3QgcmVjb21tZW5kUmVzcG9uc2UgPSBhd2FpdCBnZXRSZWNvbW1lbmRNb3ZpZXNQb3N0KHsKICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsCiAgICAgICAgICAgIHRvcE46IDYsCiAgICAgICAgICAgIGludGVudDogaW50ZW50UmVzcG9uc2UKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChyZWNvbW1lbmRSZXNwb25zZSAmJiBBcnJheS5pc0FycmF5KHJlY29tbWVuZFJlc3BvbnNlLmRhdGEpKSB7CiAgICAgICAgICAgIHRoaXMubW92aWVzID0gcmVjb21tZW5kUmVzcG9uc2UuZGF0YS5tYXAobW92aWUgPT4gKHsKICAgICAgICAgICAgICAuLi5tb3ZpZSwKICAgICAgICAgICAgICBpZDogbW92aWUuaWQgfHwgMCwKICAgICAgICAgICAgICBtb3ZpZUlkOiBtb3ZpZS5tb3ZpZUlkIHx8IG51bGwsCiAgICAgICAgICAgICAgbW92aWVOYW1lOiBtb3ZpZS5tb3ZpZU5hbWUgfHwgbW92aWUubmFtZSB8fCAn5pyq55+l55S15b2xJywKICAgICAgICAgICAgICB0eXBlOiBtb3ZpZS50eXBlIHx8ICfmnKrnn6UnLAogICAgICAgICAgICAgIGRpcmVjdGlvbjogbW92aWUuZGlyZWN0aW9uIHx8IG1vdmllLnJlZ2lvbiB8fCAn5pyq55+lJywKICAgICAgICAgICAgICByYXRpbmc6IG1vdmllLnJhdGluZyB8fCBtb3ZpZS5tb3ZpZV9yYXRpbmcgfHwgJ+aaguaXoOivhOWIhicsCiAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG1vdmllLmluc3RydWN0aW9uIHx8ICcnLAogICAgICAgICAgICAgIGRpcmVjdG9yczogbW92aWUuZGlyZWN0b3JzIHx8IG1vdmllLmRpcmVjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGFjdG9yczogbW92aWUuYWN0b3JzIHx8IG1vdmllLmFjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGRpcmVjdG9yTGlzdDogbW92aWUuZGlyZWN0b3JTdHJpbmcgPyBtb3ZpZS5kaXJlY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgICAgbW92aWUuZGlyZWN0b3IgPyAodHlwZW9mIG1vdmllLmRpcmVjdG9yID09PSAnc3RyaW5nJyA/IG1vdmllLmRpcmVjdG9yLnNwbGl0KCd8JykgOiBbXSkgOiBbXSwKICAgICAgICAgICAgICBhY3Rvckxpc3Q6IG1vdmllLmFjdG9yU3RyaW5nID8gbW92aWUuYWN0b3JTdHJpbmcuc3BsaXQoJ3wnKSA6CiAgICAgICAgICAgICAgICAgIG1vdmllLmFjdG9yID8gKHR5cGVvZiBtb3ZpZS5hY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5hY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10KICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMubW92aWVzLmxlbmd0aDsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CgogICAgICAgICAgICBjb25zdCBpbnRlbnRUeXBlID0gaW50ZW50UmVzcG9uc2UuaW50ZW50VHlwZTsKICAgICAgICAgICAgbGV0IHJlc3BvbnNlVGV4dCA9ICcnOwoKICAgICAgICAgICAgaWYgKGludGVudFR5cGUgPT09ICdkaXJlY3Rvcl9iYXNlZCcpIHsKICAgICAgICAgICAgICByZXNwb25zZVRleHQgPSBg5qC55o2u5oKo55qE6KaB5rGC77yM5Li65oKo5o6o6I2Q5LqG55u45YWz5a+85ryU55qE5L2c5ZOB77yM5YWxICQge3RoaXMubW92aWVzLmxlbmd0aH3pg6jnlLXlvbHjgIJgOwogICAgICAgICAgICB9IGVsc2UgaWYgKGludGVudFR5cGUgPT09ICd0eXBlX2Jhc2VkJykgewogICAgICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGDmoLnmja7mgqjnmoTnsbvlnovlgY/lpb3vvIzkuLrmgqjmjqjojZDkuoYgJCB7aW50ZW50UmVzcG9uc2UucGFyYW1zPy50eXBlIHx8ICcnfeexu+Wei+eahOeUteW9se+8jOWFsSAkIHt0aGlzLm1vdmllcy5sZW5ndGh96YOo44CCYDsKICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRlbnRUeXBlID09PSAncmF0aW5nX2Jhc2VkJykgewogICAgICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGDkuLrmgqjmjqjojZDkuobpq5jliIbnlLXlvbHvvIzlhbEgJCB7dGhpcy5tb3ZpZXMubGVuZ3RofemDqOOAgmA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gYOagueaNruaCqOeahOWWnOWlve+8jOS4uuaCqOaOqOiNkOS6hiAkIHt0aGlzLm1vdmllcy5sZW5ndGh96YOo55S15b2x44CCYDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jaGF0TWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2VUZXh0ICsgJzxicj48YnI+5Lul5LiL5piv5Li65oKo5o6o6I2Q55qE55S15b2x77yaPGJyPicgKwogICAgICAgICAgICAgICAgICB0aGlzLm1vdmllcy5zbGljZSgwLCAzKS5tYXAobSA9PiBg4oCiICAkIHttLm1vdmllTmFtZSB8fCBtLm5hbWV9YCkuam9pbignPGJyPicpICsKICAgICAgICAgICAgICAgICAgKHRoaXMubW92aWVzLmxlbmd0aCA+IDMgPyBgPGJyPi4uLiDov5jmnIkgJCB7dGhpcy5tb3ZpZXMubGVuZ3RoIC0gM33pg6jnlLXlvbFgIDogJycpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5jaGF0TWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICAgICAgY29udGVudDogJ+aKseatie+8jOayoeacieaJvuWIsOespuWQiOaCqOimgeaxgueahOeUteW9se+8jOivt+WwneivleWFtuS7luadoeS7tuOAgicKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2hhdE1lc3NhZ2VzLnB1c2goewogICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JywKICAgICAgICAgICAgY29udGVudDogJ+aKseatie+8jOacquiDveeQhuino+aCqOeahOmcgOaxgu+8jOivt+WwneivleeUqOabtOa4heaZsOeahOivreiogOaPj+i/sOaCqOeahOeUteW9seWBj+WlveOAgicKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdBSeaOqOiNkOivt+axguWksei0pTonLCBlcnJvcik7CiAgICAgICAgdGhpcy5jaGF0TWVzc2FnZXMucHVzaCh7CiAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JywKICAgICAgICAgIGNvbnRlbnQ6ICfmirHmrYnvvIzmjqjojZDmnI3liqHmmoLml7bkuI3lj6/nlKjvvIzor7fnqI3lkI7ph43or5XjgIInCiAgICAgICAgfSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5haUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnVzZXJJbnB1dCA9ICcnOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZVNlbmRSZXF1ZXN0KGV2ZW50KSB7CiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLnNlbmRSZWNvbW1lbmRSZXF1ZXN0KCk7CiAgICB9LAoKICAgIGFzeW5jIGxvYWRBbGxNb3ZpZXMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHVybDsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFR5cGUpIHsKICAgICAgICAgIHVybCA9IGAvbW92aWUvYnktdHlwZS8gJCB7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuc2VsZWN0ZWRUeXBlKX0/cGFnZT0gJCB7dGhpcy5jdXJyZW50UGFnZSAtIDF9JnNpemU9ICQge3RoaXMucGFnZVNpemV9YDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXJsID0gYC9tb3ZpZS9saXN0P3BhZ2U9ICQge3RoaXMuY3VycmVudFBhZ2UgLSAxfSZzaXplPSAkIHt0aGlzLnBhZ2VTaXplfWA7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KHVybCk7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT09IDIwMCAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7CiAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlc3BvbnNlLmRhdGEubWFwKG1vdmllID0+ICh7CiAgICAgICAgICAgIC4uLm1vdmllLAogICAgICAgICAgICBpZDogbW92aWUuaWQgfHwgMCwKICAgICAgICAgICAgbW92aWVJZDogbW92aWUubW92aWVJZCB8fCBudWxsLAogICAgICAgICAgICBtb3ZpZU5hbWU6IG1vdmllLm1vdmllTmFtZSB8fCBtb3ZpZS5uYW1lIHx8ICfmnKrnn6XnlLXlvbEnLAogICAgICAgICAgICB0eXBlOiBtb3ZpZS50eXBlIHx8ICfmnKrnn6UnLAogICAgICAgICAgICBkaXJlY3Rpb246IG1vdmllLmRpcmVjdGlvbiB8fCBtb3ZpZS5yZWdpb24gfHwgJ+acquefpScsCiAgICAgICAgICAgIHJhdGluZzogbW92aWUucmF0aW5nIHx8IG1vdmllLm1vdmllX3JhdGluZyB8fCAn5pqC5peg6K+E5YiGJywKICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG1vdmllLmluc3RydWN0aW9uIHx8ICcnLAogICAgICAgICAgICBkaXJlY3RvcnM6IG1vdmllLmRpcmVjdG9ycyB8fCBtb3ZpZS5kaXJlY3RvciB8fCBbXSwKICAgICAgICAgICAgYWN0b3JzOiBtb3ZpZS5hY3RvcnMgfHwgbW92aWUuYWN0b3IgfHwgW10sCiAgICAgICAgICAgIGRpcmVjdG9yTGlzdDogbW92aWUuZGlyZWN0b3JTdHJpbmcgPyBtb3ZpZS5kaXJlY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgIG1vdmllLmRpcmVjdG9yID8gKHR5cGVvZiBtb3ZpZS5kaXJlY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5kaXJlY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10sCiAgICAgICAgICAgIGFjdG9yTGlzdDogbW92aWUuYWN0b3JTdHJpbmcgPyBtb3ZpZS5hY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgIG1vdmllLmFjdG9yID8gKHR5cGVvZiBtb3ZpZS5hY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5hY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10KICAgICAgICAgIH0pKTsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbCB8fCByZXNwb25zZS5kYXRhLmxlbmd0aDsKICAgICAgICAgIHRoaXMuICRtZXNzYWdlLnN1Y2Nlc3MoYOW3suWKoOi9vSAgJCB7dGhpcy5tb3ZpZXMubGVuZ3RofSDpg6jnlLXlvbFgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tb3ZpZXMgPSBbXTsKICAgICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgICAgdGhpcy4gJG1lc3NhZ2UuZXJyb3IoJ+acquaJvuWIsOeUteW9seaVsOaNricpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfliqDovb3nlLXlvbHliJfooajlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMubW92aWVzID0gW107CiAgICAgICAgdGhpcy50b3RhbCA9IDA7CiAgICAgICAgdGhpcy4gJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veeUteW9seWIl+ihqOWksei0pe+8jOivt+mHjeivlScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZVBhZ2VDaGFuZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgICAgdGhpcy5sb2FkQWxsTW92aWVzKCk7CiAgICB9LAoKICAgIGhhbmRsZVR5cGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICB0aGlzLmxvYWRBbGxNb3ZpZXMoKTsKICAgIH0sCgogICAgaGFuZGxlTW92aWVDbGljayhtb3ZpZSkgewogICAgICB0aGlzLiAkZW1pdCgnbW92aWUtY2xpY2snLCBtb3ZpZSk7CiAgICB9LAoKICAgIGdldERpcmVjdG9yTmFtZXMobW92aWUpIHsKICAgICAgaWYgKG1vdmllLmRpcmVjdG9ycyAmJiBtb3ZpZS5kaXJlY3RvcnMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBtb3ZpZS5kaXJlY3RvcnMubWFwKGQgPT4gZC5uYW1lIHx8IGQpLmpvaW4oJ+OAgScpOwogICAgICB9IGVsc2UgaWYgKG1vdmllLmRpcmVjdG9yTGlzdCAmJiBtb3ZpZS5kaXJlY3Rvckxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBtb3ZpZS5kaXJlY3Rvckxpc3Quam9pbign44CBJyk7CiAgICAgIH0gZWxzZSBpZiAobW92aWUuZGlyZWN0b3IpIHsKICAgICAgICBpZiAodHlwZW9mIG1vdmllLmRpcmVjdG9yID09PSAnc3RyaW5nJykgewogICAgICAgICAgcmV0dXJuIG1vdmllLmRpcmVjdG9yLnNwbGl0KCd8Jykuam9pbign44CBJyk7CiAgICAgICAgfQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1vdmllLmRpcmVjdG9yKSkgewogICAgICAgICAgcmV0dXJuIG1vdmllLmRpcmVjdG9yLm1hcChkID0+IGQubmFtZSB8fCBkKS5qb2luKCfjgIEnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1vdmllLmRpcmVjdG9yOwogICAgICB9CiAgICAgIHJldHVybiAn5pyq55+lJzsKICAgIH0sCgogICAgZ2V0QWN0b3JOYW1lcyhtb3ZpZSkgewogICAgICBpZiAobW92aWUuYWN0b3JzICYmIG1vdmllLmFjdG9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIG1vdmllLmFjdG9ycy5tYXAoYSA9PiBhLm5hbWUgfHwgYSkuam9pbign44CBJyk7CiAgICAgIH0gZWxzZSBpZiAobW92aWUuYWN0b3JMaXN0ICYmIG1vdmllLmFjdG9yTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIG1vdmllLmFjdG9yTGlzdC5qb2luKCfjgIEnKTsKICAgICAgfSBlbHNlIGlmIChtb3ZpZS5hY3RvcikgewogICAgICAgIGlmICh0eXBlb2YgbW92aWUuYWN0b3IgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXR1cm4gbW92aWUuYWN0b3Iuc3BsaXQoJ3wnKS5qb2luKCfjgIEnKTsKICAgICAgICB9CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobW92aWUuYWN0b3IpKSB7CiAgICAgICAgICByZXR1cm4gbW92aWUuYWN0b3IubWFwKGEgPT4gYS5uYW1lIHx8IGEpLmpvaW4oJ+OAgScpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbW92aWUuYWN0b3I7CiAgICAgIH0KICAgICAgcmV0dXJuICfmnKrnn6UnOwogICAgfSwKCiAgICBhc3luYyBzaG93RGV0YWlsZWRNb3ZpZUNvbW1lbnRzKG1vdmllKSB7CiAgICAgIHRoaXMuY3VycmVudE1vdmllID0gbW92aWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbW92aWVJZCA9IG1vdmllLm1vdmllSWQgfHwgbW92aWUuaW5mb19pZCB8fCBtb3ZpZS5pZDsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KGAvbW92aWUvbW92aWUtY29tbWVudHMvICQge21vdmllSWR9YCk7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT09IDIwMCAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7CiAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gcmVzcG9uc2UuZGF0YS5tYXAoaXRlbSA9PiAoewogICAgICAgICAgICBjb21tZW50X2lkOiBpdGVtWydjb21tZW50X2lkJ10sCiAgICAgICAgICAgIG1vdmllX2lkOiBpdGVtWydtb3ZpZV9pZCddLAogICAgICAgICAgICBjcmVhdG9yOiBpdGVtWydjcmVhdG9yJ10sCiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW1bJ2NvbnRlbnQnXSwKICAgICAgICAgICAgY29tbWVudF9yYXRpbmc6IGl0ZW1bJ2NvbW1lbnRfcmF0aW5nJ10sCiAgICAgICAgICAgIGNvbW1lbnRfdGltZTogaXRlbVsnY29tbWVudF90aW1lJ10sCiAgICAgICAgICAgIGNvbW1lbnRfYWRkX3RpbWU6IGl0ZW1bJ2NvbW1lbnRfYWRkX3RpbWUnXQogICAgICAgICAgfSkpOwogICAgICAgICAgdGhpcy5jb21tZW50RGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICB0aGlzLiAkbWVzc2FnZS5zdWNjZXNzKGDojrflj5bliLAgICQge3RoaXMuY29tbWVudHMubGVuZ3RofSDmnaHor4Torrror6bmg4VgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jb21tZW50cyA9IFtdOwogICAgICAgICAgdGhpcy4gJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluivhOiuuuivpuaDheWksei0pScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bor4Torrror6bmg4XlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuY29tbWVudHMgPSBbXTsKICAgICAgICB0aGlzLiAkbWVzc2FnZS5lcnJvcign6I635Y+W6K+E6K666K+m5oOF5aSx6LSl77yM6K+36YeN6K+VJyk7CiAgICAgIH0KICAgIH0sCgogICAgY2xvc2VDb21tZW50RGlhbG9nKCkgewogICAgICB0aGlzLmNvbW1lbnREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVudE1vdmllID0gbnVsbDsKICAgICAgdGhpcy5jb21tZW50cyA9IFtdOwogICAgfQogIH0KfQo="},{"version":3,"sources":["MovieBrowse.vue"],"names":[],"mappings":";AAmMA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieBrowse.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"movie-browse-container\">\n    <el-container>\n      <!-- 主内容区 -->\n      <el-main class=\"main-content\">\n        <el-card shadow=\"hover\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>电影浏览</span>\n            <el-select\n                v-model=\"selectedType\"\n                placeholder=\"选择类型\"\n                style=\"margin-right: 10px; float: right;\"\n                @change=\"handleTypeChange\"\n            >\n              <el-option label=\"全部\" value=\"\"></el-option>\n              <el-option label=\"剧情\" value=\"剧情\"></el-option>\n              <el-option label=\"喜剧\" value=\"喜剧\"></el-option>\n              <el-option label=\"动作\" value=\"动作\"></el-option>\n              <el-option label=\"爱情\" value=\"爱情\"></el-option>\n              <el-option label=\"科幻\" value=\"科幻\"></el-option>\n              <el-option label=\"悬疑\" value=\"悬疑\"></el-option>\n              <el-option label=\"惊悚\" value=\"惊悚\"></el-option>\n              <el-option label=\"恐怖\" value=\"恐怖\"></el-option>\n              <el-option label=\"动画\" value=\"动画\"></el-option>\n              <el-option label=\"纪录片\" value=\"纪录片\"></el-option>\n            </el-select>\n          </div>\n\n          <!-- 使用 CSS Grid 实现电影卡片布局 -->\n          <div class=\"movie-grid\" v-loading=\"loading\">\n            <div\n                v-for=\"movie in movies\"\n                :key=\"movie.id\"\n                class=\"movie-card-wrapper\"\n            >\n              <el-card class=\"movie-item shadow-lift\" @click.native=\"handleMovieClick(movie)\">\n                <div class=\"movie-content\">\n                  <div class=\"movie-name\">{{ movie.movieName || movie.name || '未知电影' }}</div>\n\n                  <div class=\"movie-metadata\">\n                    <div class=\"metadata-item\">\n                      <i class=\"el-icon-collection-tag\"></i>\n                      <span>{{ movie.type || '未知' }}</span>\n                    </div>\n                    <div class=\"metadata-item\">\n                      <i class=\"el-icon-location\"></i>\n                      <span>{{ movie.direction || '未知' }}</span>\n                    </div>\n                    <div class=\"metadata-item\" v-if=\"movie.rating && movie.rating !== '暂无评分'\">\n                      <i class=\"el-icon-star-on\"></i>\n                      <span>{{ parseFloat(movie.rating).toFixed(1) }}</span>\n                    </div>\n                  </div>\n\n                  <div class=\"movie-info\">\n                    <div class=\"info-item\">\n                      <strong>导演：</strong>\n                      <span class=\"director-names\">{{ getDirectorNames(movie) }}</span>\n                    </div>\n                    <div class=\"info-item\">\n                      <strong>演员：</strong>\n                      <span class=\"actor-names\">{{ getActorNames(movie) }}</span>\n                    </div>\n                  </div>\n\n                  <div class=\"movie-desc\" :title=\"movie.instruction || '暂无介绍'\">\n                    {{ movie.instruction || '暂无介绍' }}\n                  </div>\n                </div>\n\n                <div class=\"movie-actions\">\n                  <el-button\n                      type=\"primary\"\n                      size=\"mini\"\n                      @click.stop=\"showDetailedMovieComments(movie)\"\n                      class=\"action-button\"\n                  >\n                    <i class=\"el-icon-chat-dot-round\"></i> 评论详情\n                  </el-button>\n                </div>\n              </el-card>\n            </div>\n          </div>\n\n          <div class=\"pagination-container\" v-if=\"total > 0\">\n            <el-pagination\n                @current-change=\"handlePageChange\"\n                :current-page=\"currentPage\"\n                :page-size=\"pageSize\"\n                layout=\"prev, pager, next, jumper\"\n                :total=\"total\"\n                :background=\"true\"\n            ></el-pagination>\n          </div>\n        </el-card>\n      </el-main>\n\n      <!-- AI助手推荐侧边栏 -->\n      <el-aside width=\"350px\" class=\"recommend-sidebar\">\n        <el-card class=\"ai-recommend-card\" shadow=\"hover\">\n          <div slot=\"header\" class=\"ai-card-header\">\n            <i class=\"el-icon-chat-dot-round\"></i>\n            <span>AI 助手推荐</span>\n          </div>\n\n          <div class=\"ai-chat-container\">\n            <div class=\"chat-messages\" ref=\"chatMessages\">\n              <div v-for=\"(msg, index) in chatMessages\" :key=\"index\" class=\"message-item\" :class=\"msg.role\">\n                <div class=\"message-avatar\" :class=\"msg.role\">\n                  <i v-if=\"msg.role === 'user'\" class=\"el-icon-user-solid\"></i>\n                  <i v-if=\"msg.role === 'assistant'\" class=\"el-icon-chat-line-round\"></i>\n                </div>\n                <div class=\"message-content\">\n                  <p v-html=\"formatMessage(msg.content)\"></p>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"input-area\">\n              <el-input\n                  v-model=\"userInput\"\n                  :rows=\"3\"\n                  type=\"textarea\"\n                  placeholder=\"告诉我您喜欢什么类型的电影，例如：'推荐一些高分科幻电影' 或 '我想看张艺谋导演的电影'\"\n                  maxlength=\"200\"\n                  show-word-limit\n                  @keyup.enter.native=\"handleSendRequest( $event)\"\n              ></el-input>\n              <el-button\n                  type=\"primary\"\n                  :loading=\"aiLoading\"\n                  @click=\"sendRecommendRequest\"\n                  :disabled=\"!userInput.trim()\"\n                  class=\"send-button\"\n              >\n                <i class=\"el-icon-position\"></i> 获取推荐\n              </el-button>\n            </div>\n\n            <div class=\"quick-actions\">\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐一些高分电影')\">高分电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐科幻类型的电影')\">科幻电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐喜剧类型的电影')\">喜剧电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐张艺谋导演的电影')\">张艺谋作品</el-button>\n            </div>\n          </div>\n        </el-card>\n      </el-aside>\n    </el-container>\n\n    <!-- 评论弹窗 -->\n    <el-dialog\n        title=\"电影评论详情\"\n        :visible.sync=\"commentDialogVisible\"\n        width=\"60%\"\n        :before-close=\"closeCommentDialog\"\n    >\n      <div v-if=\"currentMovie\">\n        <h3 style=\"margin-top: 0;\">{{ currentMovie.movieName || currentMovie.name || '未知电影' }}</h3>\n        <div v-if=\"comments.length > 0\" class=\"comments-list\">\n          <el-card\n              v-for=\"comment in comments\"\n              :key=\"comment.comment_id || comment.id\"\n              class=\"comment-item\"\n              shadow=\"never\"\n          >\n            <div class=\"comment-content\">\n              <p class=\"comment-creator\"><strong>用户：</strong>{{ comment.creator || '匿名用户' }}</p>\n              <p class=\"comment-text\"><strong>评论内容：</strong>{{ comment.content || '暂无评论内容' }}</p>\n              <div class=\"comment-footer\">\n                  <span class=\"comment-rating\" v-if=\"comment.comment_rating !== undefined && comment.comment_rating !== null\">\n                      <strong>评分：</strong>{{ comment.comment_rating }}\n                  </span>\n                <span class=\"comment-time\" v-if=\"comment.comment_time\">\n                      <strong>评论时间：</strong>{{ comment.comment_time }}\n                  </span>\n                <span class=\"comment-add-time\" v-if=\"comment.comment_add_time && comment.comment_add_time !== comment.comment_time\">\n                      <strong>添加时间：</strong>{{ comment.comment_add_time }}\n                  </span>\n              </div>\n            </div>\n          </el-card>\n        </div>\n        <div v-else class=\"no-comments\">\n          <p>暂无评论</p>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeCommentDialog\">关 闭</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from '@/utils/request'\nimport { parseUserIntent, getRecommendMoviesPost } from '@/api/recommend'\n\nexport default {\n  name: 'MovieBrowse',\n  data() {\n    return {\n      movies: [],\n      currentPage: 1,\n      pageSize: 12,\n      total: 0,\n      loading: false,\n      selectedType: '',\n      commentDialogVisible: false,\n      currentMovie: null,\n      comments: [],\n      // AI助手相关数据\n      chatMessages: [\n        {\n          role: 'assistant',\n          content: '您好！我是AI电影推荐助手，可以根据您的喜好推荐电影。请告诉我您想看什么类型的电影，或者对导演、演员有什么偏好吗？'\n        }\n      ],\n      userInput: '',\n      aiLoading: false,\n      currentUser: null\n    }\n  },\n  created() {\n    this.loadAllMovies();\n    this.checkUserSession();\n  },\n  mounted() {\n    this.scrollToBottom();\n  },\n  watch: {\n    chatMessages: {\n      handler() {\n        this. $nextTick(() => {\n          this.scrollToBottom();\n        });\n      },\n      deep: true\n    }\n  },\n  methods: {\n    checkUserSession() {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        try {\n          this.currentUser = JSON.parse(userStr);\n        } catch (e) {\n          console.error('解析用户信息失败', e);\n        }\n      }\n    },\n\n    scrollToBottom() {\n      this. $nextTick(() => {\n        if (this. $refs.chatMessages) {\n          this. $refs.chatMessages.scrollTop = this. $refs.chatMessages.scrollHeight;\n        }\n      });\n    },\n\n    formatMessage(content) {\n      return content.replace(/\\n/g, '<br>');\n    },\n\n    setQuickPrompt(prompt) {\n      this.userInput = prompt;\n    },\n\n    async sendRecommendRequest() {\n      if (!this.userInput.trim()) {\n        this. $message.warning('请输入您的推荐需求');\n        return;\n      }\n\n      this.chatMessages.push({\n        role: 'user',\n        content: this.userInput\n      });\n\n      this.aiLoading = true;\n\n      try {\n        const userId = this.currentUser ? this.currentUser.userid || this.currentUser.id || this.currentUser.userId : 'anonymous';\n\n        const intentResponse = await parseUserIntent({\n          userInput: this.userInput,\n          userId: userId\n        });\n\n        if (intentResponse && intentResponse.intentType) {\n          const recommendResponse = await getRecommendMoviesPost({\n            userId: userId,\n            topN: 6,\n            intent: intentResponse\n          });\n\n          if (recommendResponse && Array.isArray(recommendResponse.data)) {\n            this.movies = recommendResponse.data.map(movie => ({\n              ...movie,\n              id: movie.id || 0,\n              movieId: movie.movieId || null,\n              movieName: movie.movieName || movie.name || '未知电影',\n              type: movie.type || '未知',\n              direction: movie.direction || movie.region || '未知',\n              rating: movie.rating || movie.movie_rating || '暂无评分',\n              instruction: movie.instruction || '',\n              directors: movie.directors || movie.director || [],\n              actors: movie.actors || movie.actor || [],\n              directorList: movie.directorString ? movie.directorString.split('|') :\n                  movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n              actorList: movie.actorString ? movie.actorString.split('|') :\n                  movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n            }));\n\n            this.total = this.movies.length;\n            this.currentPage = 1;\n\n            const intentType = intentResponse.intentType;\n            let responseText = '';\n\n            if (intentType === 'director_based') {\n              responseText = `根据您的要求，为您推荐了相关导演的作品，共 $ {this.movies.length}部电影。`;\n            } else if (intentType === 'type_based') {\n              responseText = `根据您的类型偏好，为您推荐了 $ {intentResponse.params?.type || ''}类型的电影，共 $ {this.movies.length}部。`;\n            } else if (intentType === 'rating_based') {\n              responseText = `为您推荐了高分电影，共 $ {this.movies.length}部。`;\n            } else {\n              responseText = `根据您的喜好，为您推荐了 $ {this.movies.length}部电影。`;\n            }\n\n            this.chatMessages.push({\n              role: 'assistant',\n              content: responseText + '<br><br>以下是为您推荐的电影：<br>' +\n                  this.movies.slice(0, 3).map(m => `•  $ {m.movieName || m.name}`).join('<br>') +\n                  (this.movies.length > 3 ? `<br>... 还有 $ {this.movies.length - 3}部电影` : '')\n            });\n          } else {\n            this.chatMessages.push({\n              role: 'assistant',\n              content: '抱歉，没有找到符合您要求的电影，请尝试其他条件。'\n            });\n          }\n        } else {\n          this.chatMessages.push({\n            role: 'assistant',\n            content: '抱歉，未能理解您的需求，请尝试用更清晰的语言描述您的电影偏好。'\n          });\n        }\n      } catch (error) {\n        console.error('AI推荐请求失败:', error);\n        this.chatMessages.push({\n          role: 'assistant',\n          content: '抱歉，推荐服务暂时不可用，请稍后重试。'\n        });\n      } finally {\n        this.aiLoading = false;\n        this.userInput = '';\n      }\n    },\n\n    handleSendRequest(event) {\n      if (event.shiftKey) {\n        return;\n      }\n      event.preventDefault();\n      this.sendRecommendRequest();\n    },\n\n    async loadAllMovies() {\n      this.loading = true;\n      try {\n        let url;\n        if (this.selectedType) {\n          url = `/movie/by-type/ $ {encodeURIComponent(this.selectedType)}?page= $ {this.currentPage - 1}&size= $ {this.pageSize}`;\n        } else {\n          url = `/movie/list?page= $ {this.currentPage - 1}&size= $ {this.pageSize}`;\n        }\n\n        const response = await request.get(url);\n        if (response && response.code === 200 && Array.isArray(response.data)) {\n          this.movies = response.data.map(movie => ({\n            ...movie,\n            id: movie.id || 0,\n            movieId: movie.movieId || null,\n            movieName: movie.movieName || movie.name || '未知电影',\n            type: movie.type || '未知',\n            direction: movie.direction || movie.region || '未知',\n            rating: movie.rating || movie.movie_rating || '暂无评分',\n            instruction: movie.instruction || '',\n            directors: movie.directors || movie.director || [],\n            actors: movie.actors || movie.actor || [],\n            directorList: movie.directorString ? movie.directorString.split('|') :\n                movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n            actorList: movie.actorString ? movie.actorString.split('|') :\n                movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n          }));\n          this.total = response.total || response.data.length;\n          this. $message.success(`已加载  $ {this.movies.length} 部电影`);\n        } else {\n          this.movies = [];\n          this.total = 0;\n          this. $message.error('未找到电影数据');\n        }\n      } catch (error) {\n        console.error('加载电影列表失败:', error);\n        this.movies = [];\n        this.total = 0;\n        this. $message.error('加载电影列表失败，请重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    handlePageChange(page) {\n      this.currentPage = page;\n      this.loadAllMovies();\n    },\n\n    handleTypeChange() {\n      this.currentPage = 1;\n      this.loadAllMovies();\n    },\n\n    handleMovieClick(movie) {\n      this. $emit('movie-click', movie);\n    },\n\n    getDirectorNames(movie) {\n      if (movie.directors && movie.directors.length > 0) {\n        return movie.directors.map(d => d.name || d).join('、');\n      } else if (movie.directorList && movie.directorList.length > 0) {\n        return movie.directorList.join('、');\n      } else if (movie.director) {\n        if (typeof movie.director === 'string') {\n          return movie.director.split('|').join('、');\n        }\n        if (Array.isArray(movie.director)) {\n          return movie.director.map(d => d.name || d).join('、');\n        }\n        return movie.director;\n      }\n      return '未知';\n    },\n\n    getActorNames(movie) {\n      if (movie.actors && movie.actors.length > 0) {\n        return movie.actors.map(a => a.name || a).join('、');\n      } else if (movie.actorList && movie.actorList.length > 0) {\n        return movie.actorList.join('、');\n      } else if (movie.actor) {\n        if (typeof movie.actor === 'string') {\n          return movie.actor.split('|').join('、');\n        }\n        if (Array.isArray(movie.actor)) {\n          return movie.actor.map(a => a.name || a).join('、');\n        }\n        return movie.actor;\n      }\n      return '未知';\n    },\n\n    async showDetailedMovieComments(movie) {\n      this.currentMovie = movie;\n      try {\n        const movieId = movie.movieId || movie.info_id || movie.id;\n        const response = await request.get(`/movie/movie-comments/ $ {movieId}`);\n        if (response && response.code === 200 && Array.isArray(response.data)) {\n          this.comments = response.data.map(item => ({\n            comment_id: item['comment_id'],\n            movie_id: item['movie_id'],\n            creator: item['creator'],\n            content: item['content'],\n            comment_rating: item['comment_rating'],\n            comment_time: item['comment_time'],\n            comment_add_time: item['comment_add_time']\n          }));\n          this.commentDialogVisible = true;\n          this. $message.success(`获取到  $ {this.comments.length} 条评论详情`);\n        } else {\n          this.comments = [];\n          this. $message.error('获取评论详情失败');\n        }\n      } catch (error) {\n        console.error('获取评论详情失败:', error);\n        this.comments = [];\n        this. $message.error('获取评论详情失败，请重试');\n      }\n    },\n\n    closeCommentDialog() {\n      this.commentDialogVisible = false;\n      this.currentMovie = null;\n      this.comments = [];\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-browse-container {\n  margin: 20px auto;\n  max-width: 1600px;\n  padding: 0 15px;\n  display: flex;\n  flex-direction: column;\n}\n\n.movie-browse-container .el-container {\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  flex: 1;\n  overflow: hidden; /* 防止子元素溢出 */\n}\n\n.main-content {\n  padding: 0;\n  flex: 1;\n  min-height: 0; /* 允许 flex 子项收缩 */\n}\n\n.recommend-sidebar {\n  width: 350px !important;\n  padding: 0;\n  margin-left: 20px;\n  flex-shrink: 0; /* 防止侧边栏被压缩 */\n}\n\n.recommend-sidebar .el-card {\n  height: calc(100vh - 120px); /* 或者使用 100% 并配合父级高度 */\n  margin: 0;\n  border-radius: 0 8px 8px 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.ai-recommend-card {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.ai-recommend-card .el-card__body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap; /* 允许换行以适应小屏幕 */\n  gap: 10px; /* 添加间隙 */\n}\n\n.ai-card-header {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  padding: 15px 20px;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.ai-card-header i {\n  color: #409EFF;\n}\n\n/* --- Grid Layout for Movies --- */\n.movie-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); /* 自动填充，最小宽度240px */\n  gap: 20px; /* 网格间距 */\n  padding: 10px;\n  /* 如果你想保持每行4个（lg以上），可以这样写，但不如上面灵活 */\n  /* grid-template-columns: repeat(1, 1fr); */\n  /* @media (min-width: 768px) { grid-template-columns: repeat(2, 1fr); } */\n  /* @media (min-width: 992px) { grid-template-columns: repeat(4, 1fr); } */\n}\n\n.movie-card-wrapper {\n  /* 网格项不需要额外样式，由 grid 控制 */\n}\n\n.movie-item {\n  height: 100%; /* 让卡片填满网格项的高度 */\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border: none;\n  border-radius: 12px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between; /* 让按钮始终在底部 */\n  min-height: 320px; /* 设置最小高度以保持一致性 */\n}\n\n.movie-content {\n  padding: 20px;\n  flex: 1; /* 占据剩余空间 */\n  display: flex;\n  flex-direction: column;\n}\n\n.movie-name {\n  font-size: 18px;\n  font-weight: 700;\n  color: #333;\n  margin-bottom: 15px;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.movie-metadata {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 15px;\n  flex-wrap: wrap;\n}\n\n.metadata-item {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 12px;\n  color: #666;\n  background: #f5f7fa;\n  padding: 4px 8px;\n  border-radius: 12px;\n}\n\n.movie-info {\n  margin-bottom: 15px;\n  flex-grow: 1; /* 尝试让 info 区域也伸缩 */\n}\n\n.info-item {\n  margin-bottom: 8px;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.info-item strong {\n  color: #333;\n  font-weight: 600;\n}\n\n.director-names,\n.actor-names {\n  color: #666;\n}\n\n.movie-desc {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.6;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  margin-bottom: 20px;\n  min-height: 67px; /* 提供一个基础高度 */\n  flex-grow: 1; /* 让描述区域尽可能占用空间 */\n}\n\n.movie-actions {\n  display: flex;\n  justify-content: center; /* 按钮居中 */\n  padding: 0 20px 20px;\n  gap: 10px;\n}\n\n.action-button {\n  width: 100%; /* 按钮占满容器宽度 */\n  border-radius: 8px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.action-button:hover {\n  transform: translateY(-1px);\n}\n\n.pagination-container {\n  margin-top: 30px;\n  text-align: center;\n}\n\n/* --- Comments Dialog --- */\n.comments-list {\n  max-height: 50vh; /* 限制最大高度 */\n  overflow-y: auto;\n  padding-right: 10px; /* 防止滚动条遮挡内容 */\n}\n\n.comment-item {\n  margin-bottom: 15px;\n  border-radius: 8px;\n  border: 1px solid #ebeef5;\n  padding: 15px;\n}\n\n.comment-content p {\n  margin: 8px 0;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.comment-footer {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-top: 8px;\n  font-size: 13px;\n  color: #909399;\n}\n\n.comment-footer span {\n  display: flex;\n  align-items: center;\n}\n\n.comment-footer strong {\n  color: #606266;\n  margin-right: 4px;\n}\n\n.no-comments {\n  text-align: center;\n  color: #999;\n  padding: 30px;\n  font-style: italic;\n}\n\n/* AI Chat Styles */\n.ai-chat-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding: 0;\n}\n\n.chat-messages {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: #fafafa;\n  min-height: 300px;\n}\n\n.message-item {\n  display: flex;\n  margin-bottom: 15px;\n  align-items: flex-start;\n}\n\n.message-item.user {\n  flex-direction: row-reverse;\n}\n\n.message-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  margin-top: 3px;\n}\n\n.message-avatar.user {\n  background: #409EFF;\n  color: white;\n}\n\n.message-avatar.assistant {\n  background: #67C23A;\n  color: white;\n}\n\n.message-content {\n  max-width: calc(100% - 50px);\n  margin: 0 15px;\n}\n\n.message-content p {\n  margin: 0;\n  padding: 10px 15px;\n  border-radius: 18px;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.message-item.user .message-content p {\n  background: #409EFF;\n  color: white;\n  border-bottom-right-radius: 5px;\n}\n\n.message-item.assistant .message-content p {\n  background: white;\n  color: #333;\n  border: 1px solid #e0e0e0;\n  border-bottom-left-radius: 5px;\n}\n\n.input-area {\n  padding: 15px 20px;\n  border-top: 1px solid #eee;\n  background: white;\n}\n\n.send-button {\n  margin-top: 10px;\n  width: 100%;\n}\n\n.quick-actions {\n  padding: 0 20px 15px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  border-top: 1px solid #eee;\n  background: white;\n}\n\n.quick-actions .el-button {\n  padding: 6px 10px;\n  font-size: 12px;\n}\n\n/* --- Responsive Design --- */\n@media (max-width: 1200px) {\n  .recommend-sidebar {\n    width: 300px !important;\n    margin-left: 15px;\n  }\n}\n\n@media (max-width: 992px) {\n  .recommend-sidebar {\n    display: none;\n  }\n\n  .movie-browse-container {\n    max-width: 100%;\n    padding: 0 10px;\n  }\n\n  .card-header {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    gap: 15px;\n  }\n}\n\n@media (max-width: 768px) {\n  .movie-grid {\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* 更小的最小宽度 */\n    gap: 15px;\n  }\n\n  .movie-content {\n    padding: 15px;\n  }\n\n  .movie-name {\n    font-size: 16px;\n  }\n\n  .card-header {\n    padding: 15px;\n  }\n}\n\n@media (max-width: 480px) {\n  .movie-browse-container {\n    margin: 10px 5px; /* 减少左右外边距 */\n    padding: 0 5px;\n  }\n\n  .movie-grid {\n    grid-template-columns: 1fr; /* 在极小屏幕上变为单列 */\n    gap: 12px;\n  }\n\n  .movie-metadata {\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .card-header {\n    padding: 15px;\n  }\n}\n</style>"]}]}