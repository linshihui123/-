{"remainingRequest":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\src\\components\\MovieBrowse.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\src\\components\\MovieBrowse.vue","mtime":1769668512100},{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1768463919512},{"path":"D:\\ideaProject\\demo\\src\\main\\resources\\movie-fronted\\node_modules\\vue-loader\\lib\\index.js","mtime":1768463917873}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKaW1wb3J0IHsgcGFyc2VVc2VySW50ZW50LCBnZXRSZWNvbW1lbmRNb3ZpZXNQb3N0IH0gZnJvbSAnQC9hcGkvcmVjb21tZW5kJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNb3ZpZUJyb3dzZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdmllczogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTIsCiAgICAgIHRvdGFsOiAwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRUeXBlOiAnJywKICAgICAgY29tbWVudERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBtb3ZpZURldGFpbERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBjdXJyZW50TW92aWU6IG51bGwsCiAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgLy8gQUnliqnmiYvnm7jlhbPmlbDmja4KICAgICAgY2hhdE1lc3NhZ2VzOiBbCiAgICAgICAgewogICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICBjb250ZW50OiAn5oKo5aW977yB5oiR5pivQUnnlLXlvbHmjqjojZDliqnmiYvvvIzlj6/ku6XmoLnmja7mgqjnmoTllpzlpb3mjqjojZDnlLXlvbHjgILor7flkYror4nmiJHmgqjmg7PnnIvku4DkuYjnsbvlnovnmoTnlLXlvbHvvIzmiJbogIXlr7nlr7zmvJTjgIHmvJTlkZjmnInku4DkuYjlgY/lpb3lkJfvvJ8nCiAgICAgICAgfQogICAgICBdLAogICAgICB1c2VySW5wdXQ6ICcnLAogICAgICBhaUxvYWRpbmc6IGZhbHNlLAogICAgICBjdXJyZW50VXNlcjogbnVsbCwKICAgICAgaXNTaG93aW5nQ29tbWVudHNPbmx5OiBmYWxzZSwKICAgICAgLy8g5paw5aKe77ya6K+E6K665o+Q5Lqk55u45YWz5pWw5o2uCiAgICAgIHVzZXJSYXRpbmc6IDAsIC8vIOeUqOaIt+ivhOWIhu+8iDAtNe+8iQogICAgICB1c2VyQ29tbWVudENvbnRlbnQ6ICcnLCAvLyDnlKjmiLfor4TorrrlhoXlrrkKICAgICAgY29tbWVudFN1Ym1pdHRpbmc6IGZhbHNlIC8vIOivhOiuuuaPkOS6pOWKoOi9veeKtuaAgQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZEFsbE1vdmllcygpOwogICAgdGhpcy5jaGVja1VzZXJTZXNzaW9uKCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGNoYXRNZXNzYWdlczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5qOA5p+l55So5oi35Lya6K+dCiAgICBjaGVja1VzZXJTZXNzaW9uKCkgewogICAgICBjb25zdCB1c2VyU3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICAgICAgaWYgKHVzZXJTdHIpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEpTT04ucGFyc2UodXNlclN0cik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5lcnJvcign6Kej5p6Q55So5oi35L+h5oGv5aSx6LSlJywgZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOa7muWKqOWIsOW6lemDqAogICAgc2Nyb2xsVG9Cb3R0b20oKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBpZiAodGhpcy4kcmVmcy5jaGF0TWVzc2FnZXMpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDmoLzlvI/ljJbmtojmga/lhoXlrrkKICAgIGZvcm1hdE1lc3NhZ2UoY29udGVudCkgewogICAgICByZXR1cm4gY29udGVudC5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOwogICAgfSwKCiAgICAvLyDorr7nva7lv6vmjbfmj5DnpLoKICAgIHNldFF1aWNrUHJvbXB0KHByb21wdCkgewogICAgICB0aGlzLnVzZXJJbnB1dCA9IHByb21wdDsKICAgIH0sCgogICAgLy8g5Y+R6YCB5o6o6I2Q6K+35rGCCiAgICBhc3luYyBzZW5kUmVjb21tZW5kUmVxdWVzdCgpIHsKICAgICAgaWYgKCF0aGlzLnVzZXJJbnB1dC50cmltKCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeaCqOeahOaOqOiNkOmcgOaxgicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmNoYXRNZXNzYWdlcy5wdXNoKHsKICAgICAgICByb2xlOiAndXNlcicsCiAgICAgICAgY29udGVudDogdGhpcy51c2VySW5wdXQKICAgICAgfSk7CiAgICAgIHRoaXMuYWlMb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB1c2VySWQgPSB0aGlzLmN1cnJlbnRVc2VyID8gdGhpcy5jdXJyZW50VXNlci51c2VyaWQgfHwgdGhpcy5jdXJyZW50VXNlci5pZCB8fCB0aGlzLmN1cnJlbnRVc2VyLnVzZXJJZCA6ICdhbm9ueW1vdXMnOwogICAgICAgIGNvbnN0IGludGVudFJlc3BvbnNlID0gYXdhaXQgcGFyc2VVc2VySW50ZW50KHsKICAgICAgICAgIHVzZXJJbnB1dDogdGhpcy51c2VySW5wdXQsCiAgICAgICAgICB1c2VySWQ6IHVzZXJJZAogICAgICAgIH0pOwogICAgICAgIGlmIChpbnRlbnRSZXNwb25zZSAmJiBpbnRlbnRSZXNwb25zZS5pbnRlbnRUeXBlKSB7CiAgICAgICAgICBjb25zdCByZWNvbW1lbmRSZXNwb25zZSA9IGF3YWl0IGdldFJlY29tbWVuZE1vdmllc1Bvc3QoewogICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCwKICAgICAgICAgICAgdG9wTjogNiwKICAgICAgICAgICAgaW50ZW50OiBpbnRlbnRSZXNwb25zZQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocmVjb21tZW5kUmVzcG9uc2UgJiYgcmVjb21tZW5kUmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlY29tbWVuZFJlc3BvbnNlLmRhdGEubWFwKG1vdmllID0+IHsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgLi4ubW92aWUsCiAgICAgICAgICAgICAgICBpZDogbW92aWUuaWQgfHwgMCwKICAgICAgICAgICAgICAgIG1vdmllSWQ6IG1vdmllLm1vdmllSWQgfHwgbnVsbCwKICAgICAgICAgICAgICAgIG1vdmllTmFtZTogbW92aWUubW92aWVOYW1lIHx8IG1vdmllLm5hbWUgfHwgJ+acquefpeeUteW9sScsCiAgICAgICAgICAgICAgICB0eXBlOiBtb3ZpZS50eXBlIHx8ICfmnKrnn6UnLAogICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBtb3ZpZS5kaXJlY3Rpb24gfHwgbW92aWUucmVnaW9uIHx8ICfmnKrnn6UnLAogICAgICAgICAgICAgICAgcmF0aW5nOiBtb3ZpZS5yYXRpbmcgfHwgbW92aWUubW92aWVfcmF0aW5nIHx8IG1vdmllLm1vdmllUmF0aW5nIHx8ICfmmoLml6Dor4TliIYnLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG1vdmllLmluc3RydWN0aW9uIHx8ICcnLAogICAgICAgICAgICAgICAgZGlyZWN0b3JzOiBtb3ZpZS5kaXJlY3RvcnMgfHwgbW92aWUuZGlyZWN0b3IgfHwgW10sCiAgICAgICAgICAgICAgICBhY3RvcnM6IG1vdmllLmFjdG9ycyB8fCBtb3ZpZS5hY3RvciB8fCBbXSwKICAgICAgICAgICAgICAgIGRpcmVjdG9yTGlzdDogbW92aWUuZGlyZWN0b3JTdHJpbmcgPyBtb3ZpZS5kaXJlY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgICAgICBtb3ZpZS5kaXJlY3RvciA/ICh0eXBlb2YgbW92aWUuZGlyZWN0b3IgPT09ICdzdHJpbmcnID8gbW92aWUuZGlyZWN0b3Iuc3BsaXQoJ3wnKSA6IFtdKSA6IFtdLAogICAgICAgICAgICAgICAgYWN0b3JMaXN0OiBtb3ZpZS5hY3RvclN0cmluZyA/IG1vdmllLmFjdG9yU3RyaW5nLnNwbGl0KCd8JykgOgogICAgICAgICAgICAgICAgICAgIG1vdmllLmFjdG9yID8gKHR5cGVvZiBtb3ZpZS5hY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5hY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10KICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSB8fCBbXTsKICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMubW92aWVzLmxlbmd0aDsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgICAgICAgIGNvbnN0IGludGVudFR5cGUgPSBpbnRlbnRSZXNwb25zZS5pbnRlbnRUeXBlOwogICAgICAgICAgICBsZXQgcmVzcG9uc2VUZXh0ID0gJyc7CiAgICAgICAgICAgIGlmIChpbnRlbnRUeXBlID09PSAnZGlyZWN0b3JfYmFzZWQnKSB7CiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gYOagueaNruaCqOeahOimgeaxgu+8jOS4uuaCqOaOqOiNkOS6huebuOWFs+WvvOa8lOeahOS9nOWTge+8jOWFsSR7dGhpcy5tb3ZpZXMubGVuZ3RofemDqOeUteW9seOAgmA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZW50VHlwZSA9PT0gJ3R5cGVfYmFzZWQnKSB7CiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gYOagueaNruaCqOeahOexu+Wei+WBj+Wlve+8jOS4uuaCqOaOqOiNkOS6hiR7aW50ZW50UmVzcG9uc2UucGFyYW1zICYmIGludGVudFJlc3BvbnNlLnBhcmFtcy50eXBlID8gaW50ZW50UmVzcG9uc2UucGFyYW1zLnR5cGUgOiAnJ33nsbvlnovnmoTnlLXlvbHvvIzlhbEke3RoaXMubW92aWVzLmxlbmd0aH3pg6jjgIJgOwogICAgICAgICAgICB9IGVsc2UgaWYgKGludGVudFR5cGUgPT09ICdyYXRpbmdfYmFzZWQnKSB7CiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gYOS4uuaCqOaOqOiNkOS6humrmOWIhueUteW9se+8jOWFsSR7dGhpcy5tb3ZpZXMubGVuZ3RofemDqOOAgmA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gYOagueaNruaCqOeahOWWnOWlve+8jOS4uuaCqOaOqOiNkOS6hiR7dGhpcy5tb3ZpZXMubGVuZ3RofemDqOeUteW9seOAgmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5jaGF0TWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsCiAgICAgICAgICAgICAgY29udGVudDogcmVzcG9uc2VUZXh0ICsgJzxicj48YnI+5Lul5LiL5piv5Li65oKo5o6o6I2Q55qE55S15b2x77yaPGJyPicgKwogICAgICAgICAgICAgICAgICB0aGlzLm1vdmllcy5zbGljZSgwLCAzKS5tYXAobSA9PiBg4oCiICR7bS5tb3ZpZU5hbWUgfHwgbS5uYW1lfWApLmpvaW4oJzxicj4nKSArCiAgICAgICAgICAgICAgICAgICh0aGlzLm1vdmllcy5sZW5ndGggPiAzID8gYDxicj4uLi4g6L+Y5pyJJHt0aGlzLm1vdmllcy5sZW5ndGggLSAzfemDqOeUteW9sWAgOiAnJykKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNoYXRNZXNzYWdlcy5wdXNoKHsKICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JywKICAgICAgICAgICAgICBjb250ZW50OiAn5oqx5q2J77yM5rKh5pyJ5om+5Yiw56ym5ZCI5oKo6KaB5rGC55qE55S15b2x77yM6K+35bCd6K+V5YW25LuW5p2h5Lu244CCJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jaGF0TWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLAogICAgICAgICAgICBjb250ZW50OiAn5oqx5q2J77yM5pyq6IO955CG6Kej5oKo55qE6ZyA5rGC77yM6K+35bCd6K+V55So5pu05riF5pmw55qE6K+t6KiA5o+P6L+w5oKo55qE55S15b2x5YGP5aW944CCJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJ5o6o6I2Q6K+35rGC5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLmNoYXRNZXNzYWdlcy5wdXNoKHsKICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLAogICAgICAgICAgY29udGVudDogJ+aKseatie+8jOaOqOiNkOacjeWKoeaaguaXtuS4jeWPr+eUqO+8jOivt+eojeWQjumHjeivleOAgicKICAgICAgICB9KTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmFpTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMudXNlcklucHV0ID0gJyc7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5aSE55CG5Zue6L2m6ZSu5Y+R6YCBCiAgICBoYW5kbGVTZW5kUmVxdWVzdChldmVudCkgewogICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5zZW5kUmVjb21tZW5kUmVxdWVzdCgpOwogICAgfSwKCiAgICAvLyDliqDovb3miYDmnInnlLXlvbEKICAgIGFzeW5jIGxvYWRBbGxNb3ZpZXMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHVybDsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFR5cGUgJiYgdGhpcy5zZWxlY3RlZFR5cGUgIT09ICd3aXRoX2NvbW1lbnRzJykgewogICAgICAgICAgdXJsID0gYC9tb3ZpZS9ieS10eXBlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuc2VsZWN0ZWRUeXBlKX0/cGFnZT0ke3RoaXMuY3VycmVudFBhZ2UgLSAxfSZzaXplPSR7dGhpcy5wYWdlU2l6ZX1gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1cmwgPSBgL21vdmllL2xpc3Q/cGFnZT0ke3RoaXMuY3VycmVudFBhZ2UgLSAxfSZzaXplPSR7dGhpcy5wYWdlU2l6ZX1gOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KHVybCk7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT09IDIwMCAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlc3BvbnNlLmRhdGEubWFwKG1vdmllID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5tb3ZpZSwKICAgICAgICAgICAgICBpZDogbW92aWUuaWQgfHwgMCwKICAgICAgICAgICAgICBtb3ZpZUlkOiBtb3ZpZS5tb3ZpZUlkIHx8IG51bGwsCiAgICAgICAgICAgICAgbW92aWVOYW1lOiBtb3ZpZS5tb3ZpZU5hbWUgfHwgbW92aWUubmFtZSB8fCAn5pyq55+l55S15b2xJywKICAgICAgICAgICAgICB0eXBlOiBtb3ZpZS50eXBlIHx8ICfmnKrnn6UnLAogICAgICAgICAgICAgIGRpcmVjdGlvbjogbW92aWUuZGlyZWN0aW9uIHx8IG1vdmllLnJlZ2lvbiB8fCAn5pyq55+lJywKICAgICAgICAgICAgICByYXRpbmc6IG1vdmllLnJhdGluZyB8fCBtb3ZpZS5tb3ZpZV9yYXRpbmcgfHwgbW92aWUubW92aWVSYXRpbmcgfHwgJ+aaguaXoOivhOWIhicsCiAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG1vdmllLmluc3RydWN0aW9uIHx8ICcnLAogICAgICAgICAgICAgIGRpcmVjdG9yczogbW92aWUuZGlyZWN0b3JzIHx8IG1vdmllLmRpcmVjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGFjdG9yczogbW92aWUuYWN0b3JzIHx8IG1vdmllLmFjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGRpcmVjdG9yTGlzdDogbW92aWUuZGlyZWN0b3JTdHJpbmcgPyBtb3ZpZS5kaXJlY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgICAgbW92aWUuZGlyZWN0b3IgPyAodHlwZW9mIG1vdmllLmRpcmVjdG9yID09PSAnc3RyaW5nJyA/IG1vdmllLmRpcmVjdG9yLnNwbGl0KCd8JykgOiBbXSkgOiBbXSwKICAgICAgICAgICAgICBhY3Rvckxpc3Q6IG1vdmllLmFjdG9yU3RyaW5nID8gbW92aWUuYWN0b3JTdHJpbmcuc3BsaXQoJ3wnKSA6CiAgICAgICAgICAgICAgICAgIG1vdmllLmFjdG9yID8gKHR5cGVvZiBtb3ZpZS5hY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5hY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10KICAgICAgICAgICAgfTsKICAgICAgICAgIH0pIHx8IFtdOwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsIHx8IHJlc3BvbnNlLmRhdGEubGVuZ3RoOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDlt7LliqDovb0gJHt0aGlzLm1vdmllcy5sZW5ndGh9IOmDqOeUteW9sWApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1vdmllcyA9IFtdOwogICAgICAgICAgdGhpcy50b3RhbCA9IDA7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmnKrmib7liLDnlLXlvbHmlbDmja4nKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L2955S15b2x5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLm1vdmllcyA9IFtdOwogICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veeUteW9seWIl+ihqOWksei0pe+8jOivt+mHjeivlScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWIh+aNouWIsOWPquaYvuekuuacieivhOiuuueahOeUteW9sQogICAgYXN5bmMgc3dpdGNoVG9Nb3ZpZXNXaXRoQ29tbWVudHMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5pc1Nob3dpbmdDb21tZW50c09ubHkgPSB0cnVlOwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5nZXQoYC9tb3ZpZS9tb3ZpZXMtd2l0aC1jb21tZW50cz9wYWdlPSR7dGhpcy5jdXJyZW50UGFnZSAtIDF9JnNpemU9JHt0aGlzLnBhZ2VTaXplfWApOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09PSAyMDAgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgdGhpcy5tb3ZpZXMgPSByZXNwb25zZS5kYXRhLm1hcChtb3ZpZSA9PiB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4ubW92aWUsCiAgICAgICAgICAgICAgaWQ6IG1vdmllLmlkIHx8IDAsCiAgICAgICAgICAgICAgbW92aWVJZDogbW92aWUubW92aWVJZCB8fCBudWxsLAogICAgICAgICAgICAgIG1vdmllTmFtZTogbW92aWUubW92aWVOYW1lIHx8IG1vdmllLm5hbWUgfHwgJ+acquefpeeUteW9sScsCiAgICAgICAgICAgICAgdHlwZTogbW92aWUudHlwZSB8fCAn5pyq55+lJywKICAgICAgICAgICAgICBkaXJlY3Rpb246IG1vdmllLmRpcmVjdGlvbiB8fCBtb3ZpZS5yZWdpb24gfHwgJ+acquefpScsCiAgICAgICAgICAgICAgcmF0aW5nOiBtb3ZpZS5yYXRpbmcgfHwgbW92aWUubW92aWVfcmF0aW5nIHx8IG1vdmllLm1vdmllUmF0aW5nIHx8ICfmmoLml6Dor4TliIYnLAogICAgICAgICAgICAgIGluc3RydWN0aW9uOiBtb3ZpZS5pbnN0cnVjdGlvbiB8fCAnJywKICAgICAgICAgICAgICBkaXJlY3RvcnM6IG1vdmllLmRpcmVjdG9ycyB8fCBtb3ZpZS5kaXJlY3RvciB8fCBbXSwKICAgICAgICAgICAgICBhY3RvcnM6IG1vdmllLmFjdG9ycyB8fCBtb3ZpZS5hY3RvciB8fCBbXSwKICAgICAgICAgICAgICBkaXJlY3Rvckxpc3Q6IG1vdmllLmRpcmVjdG9yU3RyaW5nID8gbW92aWUuZGlyZWN0b3JTdHJpbmcuc3BsaXQoJ3wnKSA6CiAgICAgICAgICAgICAgICAgIG1vdmllLmRpcmVjdG9yID8gKHR5cGVvZiBtb3ZpZS5kaXJlY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5kaXJlY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10sCiAgICAgICAgICAgICAgYWN0b3JMaXN0OiBtb3ZpZS5hY3RvclN0cmluZyA/IG1vdmllLmFjdG9yU3RyaW5nLnNwbGl0KCd8JykgOgogICAgICAgICAgICAgICAgICBtb3ZpZS5hY3RvciA/ICh0eXBlb2YgbW92aWUuYWN0b3IgPT09ICdzdHJpbmcnID8gbW92aWUuYWN0b3Iuc3BsaXQoJ3wnKSA6IFtdKSA6IFtdCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KSB8fCBbXTsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbCB8fCByZXNwb25zZS5kYXRhLmxlbmd0aDsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg5bey5Yqg6L29ICR7dGhpcy5tb3ZpZXMubGVuZ3RofSDpg6jmnInor4TorrrnmoTnlLXlvbFgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tb3ZpZXMgPSBbXTsKICAgICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pyq5om+5Yiw5pyJ6K+E6K6655qE55S15b2x5pWw5o2uJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veacieivhOiuuueahOeUteW9seWIl+ihqOWksei0pTonLCBlcnJvcik7CiAgICAgICAgdGhpcy5tb3ZpZXMgPSBbXTsKICAgICAgICB0aGlzLnRvdGFsID0gMDsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliqDovb3mnInor4TorrrnmoTnlLXlvbHliJfooajlpLHotKXvvIzor7fph43or5UnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICAvLyDlpITnkIbliIbpobXlj5jljJYKICAgIGhhbmRsZVBhZ2VDaGFuZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSAnd2l0aF9jb21tZW50cycpIHsKICAgICAgICB0aGlzLnN3aXRjaFRvTW92aWVzV2l0aENvbW1lbnRzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkQWxsTW92aWVzKCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5aSE55CG57G75Z6L6YCJ5oup5Y+Y5YyWCiAgICBoYW5kbGVUeXBlQ2hhbmdlKCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSAnd2l0aF9jb21tZW50cycpIHsKICAgICAgICB0aGlzLnN3aXRjaFRvTW92aWVzV2l0aENvbW1lbnRzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc1Nob3dpbmdDb21tZW50c09ubHkgPSBmYWxzZTsKICAgICAgICB0aGlzLmxvYWRBbGxNb3ZpZXMoKTsKICAgICAgfQogICAgfSwKCiAgICAvLyDliqDovb3mnInor4TorrrnmoTnlLXlvbHvvIjkv53nlZnljp/mnInmlrnms5XvvIzlhbzlrrnpgLvovpHvvIkKICAgIGFzeW5jIGxvYWRNb3ZpZXNXaXRoQ29tbWVudHMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LmdldChgL21vdmllL21vdmllcy13aXRoLWNvbW1lbnRzP3BhZ2U9JHt0aGlzLmN1cnJlbnRQYWdlIC0gMX0mc2l6ZT0ke3RoaXMucGFnZVNpemV9YCk7CiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT09IDIwMCAmJiByZXNwb25zZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlc3BvbnNlLmRhdGEubWFwKG1vdmllID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5tb3ZpZSwKICAgICAgICAgICAgICBpZDogbW92aWUuaWQgfHwgMCwKICAgICAgICAgICAgICBtb3ZpZUlkOiBtb3ZpZS5tb3ZpZUlkIHx8IG51bGwsCiAgICAgICAgICAgICAgbW92aWVOYW1lOiBtb3ZpZS5tb3ZpZU5hbWUgfHwgbW92aWUubmFtZSB8fCAn5pyq55+l55S15b2xJywKICAgICAgICAgICAgICB0eXBlOiBtb3ZpZS50eXBlIHx8ICfmnKrnn6UnLAogICAgICAgICAgICAgIGRpcmVjdGlvbjogbW92aWUuZGlyZWN0aW9uIHx8IG1vdmllLnJlZ2lvbiB8fCAn5pyq55+lJywKICAgICAgICAgICAgICByYXRpbmc6IG1vdmllLnJhdGluZyB8fCBtb3ZpZS5tb3ZpZV9yYXRpbmcgfHwgbW92aWUubW92aWVSYXRpbmcgfHwgJ+aaguaXoOivhOWIhicsCiAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG1vdmllLmluc3RydWN0aW9uIHx8ICcnLAogICAgICAgICAgICAgIGRpcmVjdG9yczogbW92aWUuZGlyZWN0b3JzIHx8IG1vdmllLmRpcmVjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGFjdG9yczogbW92aWUuYWN0b3JzIHx8IG1vdmllLmFjdG9yIHx8IFtdLAogICAgICAgICAgICAgIGRpcmVjdG9yTGlzdDogbW92aWUuZGlyZWN0b3JTdHJpbmcgPyBtb3ZpZS5kaXJlY3RvclN0cmluZy5zcGxpdCgnfCcpIDoKICAgICAgICAgICAgICAgICAgbW92aWUuZGlyZWN0b3IgPyAodHlwZW9mIG1vdmllLmRpcmVjdG9yID09PSAnc3RyaW5nJyA/IG1vdmllLmRpcmVjdG9yLnNwbGl0KCd8JykgOiBbXSkgOiBbXSwKICAgICAgICAgICAgICBhY3Rvckxpc3Q6IG1vdmllLmFjdG9yU3RyaW5nID8gbW92aWUuYWN0b3JTdHJpbmcuc3BsaXQoJ3wnKSA6CiAgICAgICAgICAgICAgICAgIG1vdmllLmFjdG9yID8gKHR5cGVvZiBtb3ZpZS5hY3RvciA9PT0gJ3N0cmluZycgPyBtb3ZpZS5hY3Rvci5zcGxpdCgnfCcpIDogW10pIDogW10KICAgICAgICAgICAgfTsKICAgICAgICAgIH0pIHx8IFtdOwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsIHx8IHJlc3BvbnNlLmRhdGEubGVuZ3RoOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDlt7LliqDovb0gJHt0aGlzLm1vdmllcy5sZW5ndGh9IOmDqOacieivhOiuuueahOeUteW9sWApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1vdmllcyA9IFtdOwogICAgICAgICAgdGhpcy50b3RhbCA9IDA7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmnKrmib7liLDmnInor4TorrrnmoTnlLXlvbHmlbDmja4nKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295pyJ6K+E6K6655qE55S15b2x5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLm1vdmllcyA9IFtdOwogICAgICAgIHRoaXMudG90YWwgPSAwOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veacieivhOiuuueahOeUteW9seWIl+ihqOWksei0pe+8jOivt+mHjeivlScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWkhOeQhueUteW9seeCueWHu+S6i+S7tiAtIOaJk+W8gOeUteW9seivpuaDhQogICAgaGFuZGxlTW92aWVDbGljayhtb3ZpZSkgewogICAgICB0aGlzLmN1cnJlbnRNb3ZpZSA9IG1vdmllOwogICAgICB0aGlzLm1vdmllRGV0YWlsRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIC8vIOagvOW8j+WMluWvvOa8lOWQjeensAogICAgZ2V0RGlyZWN0b3JOYW1lcyhtb3ZpZSkgewogICAgICBpZiAobW92aWUuZGlyZWN0b3JzICYmIG1vdmllLmRpcmVjdG9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIG1vdmllLmRpcmVjdG9ycy5tYXAoZGlyZWN0b3IgPT4gZGlyZWN0b3IubmFtZSB8fCBkaXJlY3Rvcikuam9pbign44CBJyk7CiAgICAgIH0gZWxzZSBpZiAobW92aWUuZGlyZWN0b3JTdHJpbmcpIHsKICAgICAgICByZXR1cm4gbW92aWUuZGlyZWN0b3JTdHJpbmcuc3BsaXQoJ3wnKS5qb2luKCfjgIEnKTsKICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1vdmllLmRpcmVjdG9yTGlzdCkgJiYgbW92aWUuZGlyZWN0b3JMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gbW92aWUuZGlyZWN0b3JMaXN0LmpvaW4oJ+OAgScpOwogICAgICB9IGVsc2UgaWYgKG1vdmllLmRpcmVjdG9yKSB7CiAgICAgICAgaWYgKHR5cGVvZiBtb3ZpZS5kaXJlY3RvciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGNvbnN0IGRpcmVjdG9yU3RyID0gbW92aWUuZGlyZWN0b3IudHJpbSgpOwogICAgICAgICAgaWYgKGRpcmVjdG9yU3RyICYmIGRpcmVjdG9yU3RyICE9PSAnbnVsbCcgJiYgZGlyZWN0b3JTdHIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIHJldHVybiBkaXJlY3RvclN0ci5zcGxpdCgnfCcpLmZpbHRlcihpdGVtID0+IGl0ZW0udHJpbSgpKS5qb2luKCfjgIEnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAn5pyq55+lJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobW92aWUuZGlyZWN0b3IpKSB7CiAgICAgICAgICByZXR1cm4gbW92aWUuZGlyZWN0b3IubWFwKGRpcmVjdG9yID0+IGRpcmVjdG9yLm5hbWUgfHwgZGlyZWN0b3IpLmpvaW4oJ+OAgScpOwogICAgICAgIH0gZWxzZSBpZiAobW92aWUuZGlyZWN0b3IgJiYgbW92aWUuZGlyZWN0b3IgIT09ICdudWxsJyAmJiBtb3ZpZS5kaXJlY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHJldHVybiBTdHJpbmcobW92aWUuZGlyZWN0b3IpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJ+acquefpSc7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAn5pyq55+lJzsKICAgIH0sCgogICAgLy8g5qC85byP5YyW5ryU5ZGY5ZCN56ewCiAgICBnZXRBY3Rvck5hbWVzKG1vdmllKSB7CiAgICAgIGlmIChtb3ZpZS5hY3RvcnMgJiYgbW92aWUuYWN0b3JzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gbW92aWUuYWN0b3JzLm1hcChhY3RvciA9PiBhY3Rvci5uYW1lIHx8IGFjdG9yKS5qb2luKCfjgIEnKTsKICAgICAgfSBlbHNlIGlmIChtb3ZpZS5hY3RvclN0cmluZykgewogICAgICAgIHJldHVybiBtb3ZpZS5hY3RvclN0cmluZy5zcGxpdCgnfCcpLmpvaW4oJ+OAgScpOwogICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobW92aWUuYWN0b3JMaXN0KSAmJiBtb3ZpZS5hY3Rvckxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBtb3ZpZS5hY3Rvckxpc3Quam9pbign44CBJyk7CiAgICAgIH0gZWxzZSBpZiAobW92aWUuYWN0b3IpIHsKICAgICAgICBpZiAodHlwZW9mIG1vdmllLmFjdG9yID09PSAnc3RyaW5nJykgewogICAgICAgICAgY29uc3QgYWN0b3JTdHIgPSBtb3ZpZS5hY3Rvci50cmltKCk7CiAgICAgICAgICBpZiAoYWN0b3JTdHIgJiYgYWN0b3JTdHIgIT09ICdudWxsJyAmJiBhY3RvclN0ciAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgcmV0dXJuIGFjdG9yU3RyLnNwbGl0KCd8JykuZmlsdGVyKGl0ZW0gPT4gaXRlbS50cmltKCkpLmpvaW4oJ+OAgScpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICfmnKrnn6UnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb3ZpZS5hY3RvcikpIHsKICAgICAgICAgIHJldHVybiBtb3ZpZS5hY3Rvci5tYXAoYWN0b3IgPT4gYWN0b3IubmFtZSB8fCBhY3Rvcikuam9pbign44CBJyk7CiAgICAgICAgfSBlbHNlIGlmIChtb3ZpZS5hY3RvciAmJiBtb3ZpZS5hY3RvciAhPT0gJ251bGwnICYmIG1vdmllLmFjdG9yICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgcmV0dXJuIFN0cmluZyhtb3ZpZS5hY3Rvcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAn5pyq55+lJzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuICfmnKrnn6UnOwogICAgfSwKCiAgICAvLyDmmL7npLrnlLXlvbHor4TorroKICAgIGFzeW5jIHNob3dNb3ZpZUNvbW1lbnRzKG1vdmllKSB7CiAgICAgIHRoaXMuY3VycmVudE1vdmllID0gbW92aWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbW92aWVJZCA9IG1vdmllLm1vdmllSWQgfHwgbW92aWUuaW5mb19pZCB8fCBtb3ZpZS5pZDsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KGAvbW92aWUvYnktbW92aWUtaWQvJHttb3ZpZUlkfS9jb21tZW50c2ApOwogICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuY29tbWVudHMgPSByZXNwb25zZS5kYXRhIHx8IFtdOwogICAgICAgICAgdGhpcy5jb21tZW50RGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY29tbWVudHMgPSBbXTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluivhOiuuuWksei0pScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bor4TorrrlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuY29tbWVudHMgPSBbXTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bor4TorrrlpLHotKXvvIzor7fph43or5UnKTsKICAgICAgfQogICAgfSwKCiAgICAvLyDmmL7npLror6bnu4bnlLXlvbHor4TorroKICAgIGFzeW5jIHNob3dEZXRhaWxlZE1vdmllQ29tbWVudHMobW92aWUpIHsKICAgICAgdGhpcy5jdXJyZW50TW92aWUgPSBtb3ZpZTsKICAgICAgY29uc29sZS5sb2coJ+WHhuWkh+iOt+WPlueUteW9seivhOiuuu+8jOeUteW9seS/oeaBrzonLCBtb3ZpZSk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbW92aWVJZCA9IG1vdmllLm1vdmllSWQgfHwgbW92aWUuaW5mb19pZCB8fCBtb3ZpZS5pZDsKICAgICAgICBjb25zb2xlLmxvZygn6K+35rGC55qE55S15b2xSUQ6JywgbW92aWVJZCk7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LmdldChgL21vdmllL21vdmllLWNvbW1lbnRzLyR7bW92aWVJZH1gKTsKICAgICAgICBjb25zb2xlLmxvZygnQVBJ5ZON5bqUOicsIHJlc3BvbnNlKTsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29kZSA9PT0gMjAwICYmIHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbW1lbnRzID0gcmVzcG9uc2UuZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgY29tbWVudF9pZDogaXRlbVsnY29tbWVudF9pZCddICE9PSB1bmRlZmluZWQgJiYgaXRlbVsnY29tbWVudF9pZCddICE9PSBudWxsID8gaXRlbVsnY29tbWVudF9pZCddIDogJ+acquefpScsCiAgICAgICAgICAgICAgbW92aWVfaWQ6IGl0ZW1bJ21vdmllX2lkJ10gIT09IHVuZGVmaW5lZCAmJiBpdGVtWydtb3ZpZV9pZCddICE9PSBudWxsID8gaXRlbVsnbW92aWVfaWQnXSA6ICfmnKrnn6UnLAogICAgICAgICAgICAgIGNyZWF0b3I6IGl0ZW1bJ2NyZWF0b3InXSAhPT0gdW5kZWZpbmVkICYmIGl0ZW1bJ2NyZWF0b3InXSAhPT0gbnVsbCA/IGl0ZW1bJ2NyZWF0b3InXSA6ICfljL/lkI3nlKjmiLcnLAogICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW1bJ2NvbnRlbnQnXSAhPT0gdW5kZWZpbmVkICYmIGl0ZW1bJ2NvbnRlbnQnXSAhPT0gbnVsbCA/IGl0ZW1bJ2NvbnRlbnQnXSA6ICfmmoLml6Dor4TorrrlhoXlrrknLAogICAgICAgICAgICAgIGNvbW1lbnRfcmF0aW5nOiBpdGVtWydjb21tZW50X3JhdGluZyddICE9PSB1bmRlZmluZWQgJiYgaXRlbVsnY29tbWVudF9yYXRpbmcnXSAhPT0gbnVsbCA/IGl0ZW1bJ2NvbW1lbnRfcmF0aW5nJ10gOiAn5pqC5peg6K+E5YiGJywKICAgICAgICAgICAgICBjb21tZW50X3RpbWU6IGl0ZW1bJ2NvbW1lbnRfdGltZSddICE9PSB1bmRlZmluZWQgJiYgaXRlbVsnY29tbWVudF90aW1lJ10gIT09IG51bGwgPyBpdGVtWydjb21tZW50X3RpbWUnXSA6ICfmnKrnn6UnLAogICAgICAgICAgICAgIGNvbW1lbnRfYWRkX3RpbWU6IGl0ZW1bJ2NvbW1lbnRfYWRkX3RpbWUnXSAhPT0gdW5kZWZpbmVkICYmIGl0ZW1bJ2NvbW1lbnRfYWRkX3RpbWUnXSAhPT0gbnVsbCA/IGl0ZW1bJ2NvbW1lbnRfYWRkX3RpbWUnXSA6ICfmnKrnn6UnCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKCflpITnkIblkI7nmoTor4TorrrmlbDmja46JywgcHJvY2Vzc2VkQ29tbWVudHMpOwogICAgICAgICAgdGhpcy5jb21tZW50cyA9IHByb2Nlc3NlZENvbW1lbnRzOwogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLmNvbW1lbnREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+ivhOiuuuW8ueeql+W3suaJk+W8gO+8jOivhOiuuuaVsOmHjzonLCB0aGlzLmNvbW1lbnRzLmxlbmd0aCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg6I635Y+W5YiwICR7dGhpcy5jb21tZW50cy5sZW5ndGh9IOadoeivhOiuuuivpuaDhWApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gW107CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bor4TorrrlpLHotKXvvIzlk43lupTmlbDmja46JywgcmVzcG9uc2UpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W6K+E6K666K+m5oOF5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluivhOiuuuivpuaDheWksei0pTonLCBlcnJvcik7CiAgICAgICAgdGhpcy5jb21tZW50cyA9IFtdOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluivhOiuuuivpuaDheWksei0pe+8jOivt+mHjeivlScpOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWFs+mXreivhOiuuuW8ueeqlwogICAgY2xvc2VDb21tZW50RGlhbG9nKCkgewogICAgICB0aGlzLmNvbW1lbnREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVudE1vdmllID0gbnVsbDsKICAgICAgdGhpcy5jb21tZW50cyA9IFtdOwogICAgICAvLyDph43nva7or4TorrrooajljZUKICAgICAgdGhpcy5yZXNldENvbW1lbnRGb3JtKCk7CiAgICB9LAoKICAgIC8vIOWFs+mXreeUteW9seivpuaDheW8ueeqlwogICAgY2xvc2VNb3ZpZURldGFpbERpYWxvZygpIHsKICAgICAgdGhpcy5tb3ZpZURldGFpbERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5jdXJyZW50TW92aWUgPSBudWxsOwogICAgICB0aGlzLmNvbW1lbnRzID0gW107CiAgICB9LAoKICAgIC8vID09PT09PT09PT0g5paw5aKe77ya6K+E6K66L+ivhOWIhuaPkOS6pOebuOWFs+aWueazlSA9PT09PT09PT09CiAgICAvLyDlpITnkIbor4TliIblj5jljJYKICAgIGhhbmRsZVJhdGluZ0NoYW5nZSh2YWx1ZSkgewogICAgICB0aGlzLnVzZXJSYXRpbmcgPSB2YWx1ZTsKICAgIH0sCgogICAgLy8g6YeN572u6K+E6K666KGo5Y2VCiAgICByZXNldENvbW1lbnRGb3JtKCkgewogICAgICB0aGlzLnVzZXJSYXRpbmcgPSAwOwogICAgICB0aGlzLnVzZXJDb21tZW50Q29udGVudCA9ICcnOwogICAgfSwKCiAgICAvLyDot7PovazliLDnmbvlvZXpobXvvIjpnIDmoLnmja7lrp7pmYXot6/nlLHosIPmlbTvvIkKICAgIGdvdG9Mb2dpbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOyAvLyDlgYforr7nmbvlvZXpobXot6/nlLHkuLogL2xvZ2luCiAgICB9LAoKICAgIC8vIOaPkOS6pOivhOiuugogICAgYXN5bmMgc3VibWl0Q29tbWVudCgpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7flhYjnmbvlvZUnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnVzZXJSYXRpbmcgfHwgIXRoaXMudXNlckNvbW1lbnRDb250ZW50LnRyaW0oKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+35a6M5oiQ6K+E5YiG5ZKM6K+E6K665YaF5a655aGr5YaZJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmNvbW1lbnRTdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICAvLyDnu4Too4Xmj5DkuqTlj4LmlbAKICAgICAgICBjb25zdCBzdWJtaXREYXRhID0gewogICAgICAgICAgbW92aWVJZDogdGhpcy5jdXJyZW50TW92aWUubW92aWVJZCB8fCB0aGlzLmN1cnJlbnRNb3ZpZS5pZCwgLy8g55S15b2xSUQKICAgICAgICAgIHVzZXJJZDogdGhpcy5jdXJyZW50VXNlci51c2VyaWQgfHwgdGhpcy5jdXJyZW50VXNlci5pZCwgLy8g55So5oi3SUQKICAgICAgICAgIHJhdGluZzogdGhpcy51c2VyUmF0aW5nLCAvLyDor4TliIYKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudXNlckNvbW1lbnRDb250ZW50LnRyaW0oKSwgLy8g6K+E6K665YaF5a65CiAgICAgICAgICBjb21tZW50VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIC8vIOivhOiuuuaXtumXtO+8iOWPr+agueaNruWQjuerr+imgeaxguiwg+aVtOagvOW8j++8iQogICAgICAgIH07CgogICAgICAgIC8vIOiwg+eUqOWQjuerr+aPkOS6pOivhOiuuuaOpeWPo++8iOmcgOagueaNruWunumZheaOpeWPo+iwg+aVtFVSTOWSjOivt+axguaWueW8j++8iQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5wb3N0KCcvbW92aWUvY29tbWVudC9zdWJtaXQnLCBzdWJtaXREYXRhKTsKICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+ivhOiuuuaPkOS6pOaIkOWKn++8gScpOwogICAgICAgICAgLy8g6YeN572u6KGo5Y2VCiAgICAgICAgICB0aGlzLnJlc2V0Q29tbWVudEZvcm0oKTsKICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veivhOiuuuWIl+ihqAogICAgICAgICAgYXdhaXQgdGhpcy5zaG93RGV0YWlsZWRNb3ZpZUNvbW1lbnRzKHRoaXMuY3VycmVudE1vdmllKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+E6K665o+Q5Lqk5aSx6LSl77yaJyArIChyZXNwb25zZS5tc2cgfHwgJ+acjeWKoeWZqOmUmeivrycpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5o+Q5Lqk6K+E6K665aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor4Torrrmj5DkuqTlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmNvbW1lbnRTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["MovieBrowse.vue"],"names":[],"mappings":";AAsQA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieBrowse.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"movie-browse-container\">\n    <el-container>\n      <!-- 主内容区 -->\n      <el-main class=\"main-content\">\n        <el-card shadow=\"hover\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>电影浏览</span>\n            <div class=\"header-controls\">\n              <el-select v-model=\"selectedType\" placeholder=\"选择类型\" style=\"margin-right: 10px;\" @change=\"handleTypeChange\">\n                <el-option label=\"全部\" value=\"\"></el-option>\n                <el-option label=\"有评论的电影\" value=\"with_comments\"></el-option>\n                <el-option label=\"剧情\" value=\"剧情\"></el-option>\n                <el-option label=\"喜剧\" value=\"喜剧\"></el-option>\n                <el-option label=\"动作\" value=\"动作\"></el-option>\n                <el-option label=\"爱情\" value=\"爱情\"></el-option>\n                <el-option label=\"科幻\" value=\"科幻\"></el-option>\n                <el-option label=\"悬疑\" value=\"悬疑\"></el-option>\n                <el-option label=\"惊悚\" value=\"惊悚\"></el-option>\n                <el-option label=\"恐怖\" value=\"恐怖\"></el-option>\n                <el-option label=\"动画\" value=\"动画\"></el-option>\n                <el-option label=\"纪录片\" value=\"纪录片\"></el-option>\n              </el-select>\n            </div>\n          </div>\n          <el-row :gutter=\"12\">\n            <el-col :xs=\"24\" :sm=\"12\" :md=\"6\" :lg=\"6\" v-for=\"movie in movies\" :key=\"movie.id\" class=\"movie-card\">\n              <el-card class=\"movie-item shadow-lift\" @click.native=\"handleMovieClick(movie)\">\n                <div class=\"movie-content\">\n                  <div class=\"movie-name\">{{ movie.movieName || movie.name || '未知电影' }}</div>\n                  <div class=\"movie-metadata\">\n                    <div class=\"metadata-item\">\n                      <i class=\"el-icon-collection-tag\"></i>\n                      <span>{{ movie.type || '未知' }}</span>\n                    </div>\n                    <div class=\"metadata-item\">\n                      <i class=\"el-icon-location\"></i>\n                      <span>{{ movie.direction || '未知' }}</span>\n                    </div>\n                    <div class=\"metadata-item\" v-if=\"movie.rating && movie.rating !== '暂无评分'\">\n                      <i class=\"el-icon-star-on\"></i>\n                      <span>{{ parseFloat(movie.rating).toFixed(1) }}</span>\n                    </div>\n                  </div>\n                  <div class=\"movie-info\">\n                    <div class=\"info-item\">\n                      <strong>导演：</strong>\n                      <span class=\"director-names\">{{ getDirectorNames(movie) }}</span>\n                    </div>\n                    <div class=\"info-item\">\n                      <strong>演员：</strong>\n                      <span class=\"actor-names\">{{ getActorNames(movie) }}</span>\n                    </div>\n                  </div>\n                  <div class=\"movie-desc\" :title=\"movie.instruction || '暂无介绍'\">\n                    {{ movie.instruction || '暂无介绍' }}\n                  </div>\n                </div>\n                <div class=\"movie-actions\">\n                  <el-button\n                      type=\"primary\"\n                      size=\"mini\"\n                      @click.stop=\"showDetailedMovieComments(movie)\"\n                      class=\"action-button\"\n                  >\n                    <i class=\"el-icon-chat-dot-round\"></i> 评论详情\n                  </el-button>\n                </div>\n              </el-card>\n            </el-col>\n          </el-row>\n          <div class=\"pagination-container\" v-if=\"total > 0\">\n            <el-pagination\n                @current-change=\"handlePageChange\"\n                :current-page=\"currentPage\"\n                :page-size=\"pageSize\"\n                layout=\"prev, pager, next, jumper\"\n                :total=\"total\"\n                :background=\"true\"\n            ></el-pagination>\n          </div>\n        </el-card>\n      </el-main>\n\n      <!-- AI助手推荐侧边栏 -->\n      <el-aside width=\"350px\" class=\"recommend-sidebar\">\n        <el-card class=\"ai-recommend-card\" shadow=\"hover\">\n          <div slot=\"header\" class=\"ai-card-header\">\n            <i class=\"el-icon-chat-dot-round\"></i>\n            <span>AI 助手推荐</span>\n          </div>\n          <div class=\"ai-chat-container\">\n            <div class=\"chat-messages\" ref=\"chatMessages\">\n              <div v-for=\"(msg, index) in chatMessages\" :key=\"index\" class=\"message-item\" :class=\"msg.role\">\n                <div class=\"message-avatar\" :class=\"msg.role\">\n                  <i v-if=\"msg.role === 'user'\" class=\"el-icon-user-solid\"></i>\n                  <i v-if=\"msg.role === 'assistant'\" class=\"el-icon-chat-line-round\"></i>\n                </div>\n                <div class=\"message-content\">\n                  <p v-html=\"formatMessage(msg.content)\"></p>\n                </div>\n              </div>\n            </div>\n            <div class=\"input-area\">\n              <el-input\n                  v-model=\"userInput\"\n                  :rows=\"3\"\n                  type=\"textarea\"\n                  placeholder=\"告诉我您喜欢什么类型的电影，例如：'推荐一些高分科幻电影' 或 '我想看张艺谋导演的电影'\"\n                  maxlength=\"200\"\n                  show-word-limit\n                  @keyup.enter.native=\"handleSendRequest($event)\"\n              ></el-input>\n              <el-button\n                  type=\"primary\"\n                  :loading=\"aiLoading\"\n                  @click=\"sendRecommendRequest\"\n                  :disabled=\"!userInput.trim()\"\n                  class=\"send-button\"\n              >\n                <i class=\"el-icon-position\"></i> 获取推荐\n              </el-button>\n            </div>\n            <div class=\"quick-actions\">\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐一些高分电影')\">高分电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐科幻类型的电影')\">科幻电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐喜剧类型的电影')\">喜剧电影</el-button>\n              <el-button size=\"mini\" @click=\"setQuickPrompt('推荐张艺谋导演的电影')\">张艺谋作品</el-button>\n            </div>\n          </div>\n        </el-card>\n      </el-aside>\n    </el-container>\n\n    <!-- 电影详情弹窗 -->\n    <el-dialog\n        title=\"电影详情\"\n        :visible.sync=\"movieDetailDialogVisible\"\n        width=\"60%\"\n        :before-close=\"closeMovieDetailDialog\"\n    >\n      <div v-if=\"currentMovie\" class=\"movie-detail-content\">\n        <h3>{{ currentMovie.movieName || currentMovie.name || '未知电影' }}</h3>\n        <el-descriptions :column=\"1\" border>\n          <el-descriptions-item label=\"电影ID\">{{ currentMovie.id || currentMovie.movieId || '未知' }}</el-descriptions-item>\n          <el-descriptions-item label=\"电影名称\">{{ currentMovie.movieName || currentMovie.name || '未知电影' }}</el-descriptions-item>\n          <el-descriptions-item label=\"类型\">{{ currentMovie.type || '未知' }}</el-descriptions-item>\n          <el-descriptions-item label=\"地区\">{{ currentMovie.direction || currentMovie.region || '未知' }}</el-descriptions-item>\n          <el-descriptions-item label=\"评分\">{{ currentMovie.rating || currentMovie.movie_rating || currentMovie.movieRating || '暂无评分' }}</el-descriptions-item>\n          <el-descriptions-item label=\"导演\">{{ getDirectorNames(currentMovie) }}</el-descriptions-item>\n          <el-descriptions-item label=\"演员\">{{ getActorNames(currentMovie) }}</el-descriptions-item>\n          <el-descriptions-item label=\"简介\" :span=\"2\">\n            <div class=\"movie-intro\">{{ currentMovie.instruction || currentMovie.description || '暂无简介' }}</div>\n          </el-descriptions-item>\n        </el-descriptions>\n      </div>\n    </el-dialog>\n\n    <!-- 评论弹窗（新增评论/评分提交功能） -->\n    <el-dialog\n        title=\"电影评论\"\n        :visible.sync=\"commentDialogVisible\"\n        width=\"60%\"\n        :before-close=\"closeCommentDialog\"\n        class=\"comment-dialog\"\n    >\n      <div v-if=\"currentMovie\" class=\"comment-dialog-content\">\n        <h3 class=\"comment-movie-title\">{{ currentMovie.movieName || currentMovie.name }} 的评论</h3>\n\n        <!-- 新增：评论/评分提交表单 -->\n        <div class=\"comment-submit-form\" v-if=\"currentUser\">\n          <el-card shadow=\"never\" class=\"submit-card form-card\">\n            <div slot=\"header\" class=\"submit-card-header\">\n              <span class=\"submit-card-title\"><i class=\"el-icon-edit-outline\"></i> 提交我的评论</span>\n            </div>\n            <div class=\"submit-form-content\">\n              <div class=\"rating-item\">\n                <label class=\"form-label\">我的评分：</label>\n                <div class=\"rating-wrapper\">\n                  <el-rate\n                      v-model=\"userRating\"\n                      max=\"5\"\n                      :colors=\"['#F7BA2A', '#F7BA2A', '#FF9900']\"\n                      :void-color=\"'#C6D1DE'\"\n                      @change=\"handleRatingChange\"\n                      class=\"rate-component\"\n                  ></el-rate>\n                  <span class=\"rating-text\">{{ userRating > 0 ? `${userRating} 星` : '未评分' }}</span>\n                </div>\n              </div>\n              <div class=\"comment-content-item\">\n                <label class=\"form-label\">评论内容：</label>\n                <el-input\n                    v-model=\"userCommentContent\"\n                    type=\"textarea\"\n                    :rows=\"4\"\n                    maxlength=\"500\"\n                    show-word-limit\n                    placeholder=\"请输入您的观影感受（最多500字）\"\n                    class=\"comment-textarea\"\n                ></el-input>\n              </div>\n              <div class=\"submit-button-group\">\n                <el-button\n                    type=\"primary\"\n                    @click=\"submitComment\"\n                    :loading=\"commentSubmitting\"\n                    :disabled=\"!userRating || !userCommentContent.trim()\"\n                    icon=\"el-icon-check\"\n                    class=\"submit-btn\"\n                >\n                  提交评论\n                </el-button>\n                <el-button @click=\"resetCommentForm\" icon=\"el-icon-refresh-left\" class=\"reset-btn\">清空</el-button>\n              </div>\n            </div>\n          </el-card>\n        </div>\n\n        <!-- 未登录提示 -->\n        <div class=\"login-tip\" v-else>\n          <el-card class=\"login-tip-card\">\n            <i class=\"el-icon-warning\"></i>\n            <span class=\"login-tip-text\">请先登录后再提交评论</span>\n            <el-button type=\"primary\" @click=\"gotoLogin\" class=\"login-btn\">去登录</el-button>\n          </el-card>\n        </div>\n\n        <!-- 现有评论列表 -->\n        <div v-if=\"comments.length > 0\" class=\"comments-list-section\">\n          <h4 class=\"section-title\"><i class=\"el-icon-chat-line-square\"></i> 已有评论</h4>\n          <div class=\"comments-list\">\n            <el-card v-for=\"comment in comments\" :key=\"comment.comment_id\" class=\"comment-item user-comment-card\">\n              <div class=\"comment-header\">\n                <div class=\"comment-user\">\n                  <i class=\"el-icon-user\"></i>\n                  <span class=\"user-name\">{{ comment.creator || '匿名用户' }}</span>\n                </div>\n                <div class=\"comment-rating\">\n                  <i class=\"el-icon-star-on\" :style=\"{ color: comment.comment_rating >= 4 ? '#F7BA2A' : comment.comment_rating >= 2 ? '#8CC5FF' : '#E6A23C' }\"></i>\n                  <span class=\"rating-value\">{{ comment.comment_rating !== undefined ? comment.comment_rating : '暂无评分' }}</span>\n                </div>\n              </div>\n              <div class=\"comment-body\">\n                <p class=\"comment-content-text\">{{ comment.content || '暂无评论内容' }}</p>\n              </div>\n              <div class=\"comment-footer\">\n                <span class=\"comment-time\"><i class=\"el-icon-time\"></i> {{ comment.comment_time || comment.comment_add_time || '未知' }}</span>\n              </div>\n            </el-card>\n          </div>\n        </div>\n        <div v-else class=\"no-comments\">\n          <i class=\"el-icon-chat-square\"></i>\n          <p>暂无评论，快来抢沙发吧~</p>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from '@/utils/request'\nimport { parseUserIntent, getRecommendMoviesPost } from '@/api/recommend'\n\nexport default {\n  name: 'MovieBrowse',\n  data() {\n    return {\n      movies: [],\n      currentPage: 1,\n      pageSize: 12,\n      total: 0,\n      loading: false,\n      selectedType: '',\n      commentDialogVisible: false,\n      movieDetailDialogVisible: false,\n      currentMovie: null,\n      comments: [],\n      // AI助手相关数据\n      chatMessages: [\n        {\n          role: 'assistant',\n          content: '您好！我是AI电影推荐助手，可以根据您的喜好推荐电影。请告诉我您想看什么类型的电影，或者对导演、演员有什么偏好吗？'\n        }\n      ],\n      userInput: '',\n      aiLoading: false,\n      currentUser: null,\n      isShowingCommentsOnly: false,\n      // 新增：评论提交相关数据\n      userRating: 0, // 用户评分（0-5）\n      userCommentContent: '', // 用户评论内容\n      commentSubmitting: false // 评论提交加载状态\n    }\n  },\n  created() {\n    this.loadAllMovies();\n    this.checkUserSession();\n  },\n  mounted() {\n    this.scrollToBottom();\n  },\n  watch: {\n    chatMessages: {\n      handler() {\n        this.$nextTick(() => {\n          this.scrollToBottom();\n        });\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // 检查用户会话\n    checkUserSession() {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        try {\n          this.currentUser = JSON.parse(userStr);\n        } catch (e) {\n          console.error('解析用户信息失败', e);\n        }\n      }\n    },\n\n    // 滚动到底部\n    scrollToBottom() {\n      this.$nextTick(() => {\n        if (this.$refs.chatMessages) {\n          this.$refs.chatMessages.scrollTop = this.$refs.chatMessages.scrollHeight;\n        }\n      });\n    },\n\n    // 格式化消息内容\n    formatMessage(content) {\n      return content.replace(/\\n/g, '<br>');\n    },\n\n    // 设置快捷提示\n    setQuickPrompt(prompt) {\n      this.userInput = prompt;\n    },\n\n    // 发送推荐请求\n    async sendRecommendRequest() {\n      if (!this.userInput.trim()) {\n        this.$message.warning('请输入您的推荐需求');\n        return;\n      }\n      this.chatMessages.push({\n        role: 'user',\n        content: this.userInput\n      });\n      this.aiLoading = true;\n      try {\n        const userId = this.currentUser ? this.currentUser.userid || this.currentUser.id || this.currentUser.userId : 'anonymous';\n        const intentResponse = await parseUserIntent({\n          userInput: this.userInput,\n          userId: userId\n        });\n        if (intentResponse && intentResponse.intentType) {\n          const recommendResponse = await getRecommendMoviesPost({\n            userId: userId,\n            topN: 6,\n            intent: intentResponse\n          });\n          if (recommendResponse && recommendResponse.data) {\n            this.movies = recommendResponse.data.map(movie => {\n              return {\n                ...movie,\n                id: movie.id || 0,\n                movieId: movie.movieId || null,\n                movieName: movie.movieName || movie.name || '未知电影',\n                type: movie.type || '未知',\n                direction: movie.direction || movie.region || '未知',\n                rating: movie.rating || movie.movie_rating || movie.movieRating || '暂无评分',\n                instruction: movie.instruction || '',\n                directors: movie.directors || movie.director || [],\n                actors: movie.actors || movie.actor || [],\n                directorList: movie.directorString ? movie.directorString.split('|') :\n                    movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n                actorList: movie.actorString ? movie.actorString.split('|') :\n                    movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n              };\n            }) || [];\n            this.total = this.movies.length;\n            this.currentPage = 1;\n            const intentType = intentResponse.intentType;\n            let responseText = '';\n            if (intentType === 'director_based') {\n              responseText = `根据您的要求，为您推荐了相关导演的作品，共${this.movies.length}部电影。`;\n            } else if (intentType === 'type_based') {\n              responseText = `根据您的类型偏好，为您推荐了${intentResponse.params && intentResponse.params.type ? intentResponse.params.type : ''}类型的电影，共${this.movies.length}部。`;\n            } else if (intentType === 'rating_based') {\n              responseText = `为您推荐了高分电影，共${this.movies.length}部。`;\n            } else {\n              responseText = `根据您的喜好，为您推荐了${this.movies.length}部电影。`;\n            }\n            this.chatMessages.push({\n              role: 'assistant',\n              content: responseText + '<br><br>以下是为您推荐的电影：<br>' +\n                  this.movies.slice(0, 3).map(m => `• ${m.movieName || m.name}`).join('<br>') +\n                  (this.movies.length > 3 ? `<br>... 还有${this.movies.length - 3}部电影` : '')\n            });\n          } else {\n            this.chatMessages.push({\n              role: 'assistant',\n              content: '抱歉，没有找到符合您要求的电影，请尝试其他条件。'\n            });\n          }\n        } else {\n          this.chatMessages.push({\n            role: 'assistant',\n            content: '抱歉，未能理解您的需求，请尝试用更清晰的语言描述您的电影偏好。'\n          });\n        }\n      } catch (error) {\n        console.error('AI推荐请求失败:', error);\n        this.chatMessages.push({\n          role: 'assistant',\n          content: '抱歉，推荐服务暂时不可用，请稍后重试。'\n        });\n      } finally {\n        this.aiLoading = false;\n        this.userInput = '';\n      }\n    },\n\n    // 处理回车键发送\n    handleSendRequest(event) {\n      if (event.shiftKey) {\n        return;\n      }\n      event.preventDefault();\n      this.sendRecommendRequest();\n    },\n\n    // 加载所有电影\n    async loadAllMovies() {\n      this.loading = true;\n      try {\n        let url;\n        if (this.selectedType && this.selectedType !== 'with_comments') {\n          url = `/movie/by-type/${encodeURIComponent(this.selectedType)}?page=${this.currentPage - 1}&size=${this.pageSize}`;\n        } else {\n          url = `/movie/list?page=${this.currentPage - 1}&size=${this.pageSize}`;\n        }\n        const response = await request.get(url);\n        if (response && response.code === 200 && response.data) {\n          this.movies = response.data.map(movie => {\n            return {\n              ...movie,\n              id: movie.id || 0,\n              movieId: movie.movieId || null,\n              movieName: movie.movieName || movie.name || '未知电影',\n              type: movie.type || '未知',\n              direction: movie.direction || movie.region || '未知',\n              rating: movie.rating || movie.movie_rating || movie.movieRating || '暂无评分',\n              instruction: movie.instruction || '',\n              directors: movie.directors || movie.director || [],\n              actors: movie.actors || movie.actor || [],\n              directorList: movie.directorString ? movie.directorString.split('|') :\n                  movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n              actorList: movie.actorString ? movie.actorString.split('|') :\n                  movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n            };\n          }) || [];\n          this.total = response.total || response.data.length;\n          this.$message.success(`已加载 ${this.movies.length} 部电影`);\n        } else {\n          this.movies = [];\n          this.total = 0;\n          this.$message.error('未找到电影数据');\n        }\n      } catch (error) {\n        console.error('加载电影列表失败:', error);\n        this.movies = [];\n        this.total = 0;\n        this.$message.error('加载电影列表失败，请重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 切换到只显示有评论的电影\n    async switchToMoviesWithComments() {\n      this.loading = true;\n      try {\n        this.isShowingCommentsOnly = true;\n        const response = await request.get(`/movie/movies-with-comments?page=${this.currentPage - 1}&size=${this.pageSize}`);\n        if (response && response.code === 200 && response.data) {\n          this.movies = response.data.map(movie => {\n            return {\n              ...movie,\n              id: movie.id || 0,\n              movieId: movie.movieId || null,\n              movieName: movie.movieName || movie.name || '未知电影',\n              type: movie.type || '未知',\n              direction: movie.direction || movie.region || '未知',\n              rating: movie.rating || movie.movie_rating || movie.movieRating || '暂无评分',\n              instruction: movie.instruction || '',\n              directors: movie.directors || movie.director || [],\n              actors: movie.actors || movie.actor || [],\n              directorList: movie.directorString ? movie.directorString.split('|') :\n                  movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n              actorList: movie.actorString ? movie.actorString.split('|') :\n                  movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n            };\n          }) || [];\n          this.total = response.total || response.data.length;\n          this.$message.success(`已加载 ${this.movies.length} 部有评论的电影`);\n        } else {\n          this.movies = [];\n          this.total = 0;\n          this.$message.error('未找到有评论的电影数据');\n        }\n      } catch (error) {\n        console.error('加载有评论的电影列表失败:', error);\n        this.movies = [];\n        this.total = 0;\n        this.$message.error('加载有评论的电影列表失败，请重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 处理分页变化\n    handlePageChange(page) {\n      this.currentPage = page;\n      if (this.selectedType === 'with_comments') {\n        this.switchToMoviesWithComments();\n      } else {\n        this.loadAllMovies();\n      }\n    },\n\n    // 处理类型选择变化\n    handleTypeChange() {\n      this.currentPage = 1;\n      if (this.selectedType === 'with_comments') {\n        this.switchToMoviesWithComments();\n      } else {\n        this.isShowingCommentsOnly = false;\n        this.loadAllMovies();\n      }\n    },\n\n    // 加载有评论的电影（保留原有方法，兼容逻辑）\n    async loadMoviesWithComments() {\n      this.loading = true;\n      try {\n        const response = await request.get(`/movie/movies-with-comments?page=${this.currentPage - 1}&size=${this.pageSize}`);\n        if (response && response.code === 200 && response.data) {\n          this.movies = response.data.map(movie => {\n            return {\n              ...movie,\n              id: movie.id || 0,\n              movieId: movie.movieId || null,\n              movieName: movie.movieName || movie.name || '未知电影',\n              type: movie.type || '未知',\n              direction: movie.direction || movie.region || '未知',\n              rating: movie.rating || movie.movie_rating || movie.movieRating || '暂无评分',\n              instruction: movie.instruction || '',\n              directors: movie.directors || movie.director || [],\n              actors: movie.actors || movie.actor || [],\n              directorList: movie.directorString ? movie.directorString.split('|') :\n                  movie.director ? (typeof movie.director === 'string' ? movie.director.split('|') : []) : [],\n              actorList: movie.actorString ? movie.actorString.split('|') :\n                  movie.actor ? (typeof movie.actor === 'string' ? movie.actor.split('|') : []) : []\n            };\n          }) || [];\n          this.total = response.total || response.data.length;\n          this.$message.success(`已加载 ${this.movies.length} 部有评论的电影`);\n        } else {\n          this.movies = [];\n          this.total = 0;\n          this.$message.error('未找到有评论的电影数据');\n        }\n      } catch (error) {\n        console.error('加载有评论的电影列表失败:', error);\n        this.movies = [];\n        this.total = 0;\n        this.$message.error('加载有评论的电影列表失败，请重试');\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 处理电影点击事件 - 打开电影详情\n    handleMovieClick(movie) {\n      this.currentMovie = movie;\n      this.movieDetailDialogVisible = true;\n    },\n\n    // 格式化导演名称\n    getDirectorNames(movie) {\n      if (movie.directors && movie.directors.length > 0) {\n        return movie.directors.map(director => director.name || director).join('、');\n      } else if (movie.directorString) {\n        return movie.directorString.split('|').join('、');\n      } else if (Array.isArray(movie.directorList) && movie.directorList.length > 0) {\n        return movie.directorList.join('、');\n      } else if (movie.director) {\n        if (typeof movie.director === 'string') {\n          const directorStr = movie.director.trim();\n          if (directorStr && directorStr !== 'null' && directorStr !== 'undefined') {\n            return directorStr.split('|').filter(item => item.trim()).join('、');\n          } else {\n            return '未知';\n          }\n        }\n        if (Array.isArray(movie.director)) {\n          return movie.director.map(director => director.name || director).join('、');\n        } else if (movie.director && movie.director !== 'null' && movie.director !== 'undefined') {\n          return String(movie.director);\n        } else {\n          return '未知';\n        }\n      }\n      return '未知';\n    },\n\n    // 格式化演员名称\n    getActorNames(movie) {\n      if (movie.actors && movie.actors.length > 0) {\n        return movie.actors.map(actor => actor.name || actor).join('、');\n      } else if (movie.actorString) {\n        return movie.actorString.split('|').join('、');\n      } else if (Array.isArray(movie.actorList) && movie.actorList.length > 0) {\n        return movie.actorList.join('、');\n      } else if (movie.actor) {\n        if (typeof movie.actor === 'string') {\n          const actorStr = movie.actor.trim();\n          if (actorStr && actorStr !== 'null' && actorStr !== 'undefined') {\n            return actorStr.split('|').filter(item => item.trim()).join('、');\n          } else {\n            return '未知';\n          }\n        }\n        if (Array.isArray(movie.actor)) {\n          return movie.actor.map(actor => actor.name || actor).join('、');\n        } else if (movie.actor && movie.actor !== 'null' && movie.actor !== 'undefined') {\n          return String(movie.actor);\n        } else {\n          return '未知';\n        }\n      }\n      return '未知';\n    },\n\n    // 显示电影评论\n    async showMovieComments(movie) {\n      this.currentMovie = movie;\n      try {\n        const movieId = movie.movieId || movie.info_id || movie.id;\n        const response = await request.get(`/movie/by-movie-id/${movieId}/comments`);\n        if (response && response.code === 200) {\n          this.comments = response.data || [];\n          this.commentDialogVisible = true;\n        } else {\n          this.comments = [];\n          this.$message.error('获取评论失败');\n        }\n      } catch (error) {\n        console.error('获取评论失败:', error);\n        this.comments = [];\n        this.$message.error('获取评论失败，请重试');\n      }\n    },\n\n    // 显示详细电影评论\n    async showDetailedMovieComments(movie) {\n      this.currentMovie = movie;\n      console.log('准备获取电影评论，电影信息:', movie);\n      try {\n        const movieId = movie.movieId || movie.info_id || movie.id;\n        console.log('请求的电影ID:', movieId);\n        const response = await request.get(`/movie/movie-comments/${movieId}`);\n        console.log('API响应:', response);\n        if (response && response.code === 200 && response.data) {\n          const processedComments = response.data.map(item => {\n            return {\n              comment_id: item['comment_id'] !== undefined && item['comment_id'] !== null ? item['comment_id'] : '未知',\n              movie_id: item['movie_id'] !== undefined && item['movie_id'] !== null ? item['movie_id'] : '未知',\n              creator: item['creator'] !== undefined && item['creator'] !== null ? item['creator'] : '匿名用户',\n              content: item['content'] !== undefined && item['content'] !== null ? item['content'] : '暂无评论内容',\n              comment_rating: item['comment_rating'] !== undefined && item['comment_rating'] !== null ? item['comment_rating'] : '暂无评分',\n              comment_time: item['comment_time'] !== undefined && item['comment_time'] !== null ? item['comment_time'] : '未知',\n              comment_add_time: item['comment_add_time'] !== undefined && item['comment_add_time'] !== null ? item['comment_add_time'] : '未知'\n            };\n          });\n          console.log('处理后的评论数据:', processedComments);\n          this.comments = processedComments;\n          this.$nextTick(() => {\n            this.commentDialogVisible = true;\n            this.$forceUpdate();\n            console.log('评论弹窗已打开，评论数量:', this.comments.length);\n          });\n          this.$message.success(`获取到 ${this.comments.length} 条评论详情`);\n        } else {\n          this.comments = [];\n          console.error('获取评论失败，响应数据:', response);\n          this.$message.error('获取评论详情失败');\n        }\n      } catch (error) {\n        console.error('获取评论详情失败:', error);\n        this.comments = [];\n        this.$message.error('获取评论详情失败，请重试');\n      }\n    },\n\n    // 关闭评论弹窗\n    closeCommentDialog() {\n      this.commentDialogVisible = false;\n      this.currentMovie = null;\n      this.comments = [];\n      // 重置评论表单\n      this.resetCommentForm();\n    },\n\n    // 关闭电影详情弹窗\n    closeMovieDetailDialog() {\n      this.movieDetailDialogVisible = false;\n      this.currentMovie = null;\n      this.comments = [];\n    },\n\n    // ========== 新增：评论/评分提交相关方法 ==========\n    // 处理评分变化\n    handleRatingChange(value) {\n      this.userRating = value;\n    },\n\n    // 重置评论表单\n    resetCommentForm() {\n      this.userRating = 0;\n      this.userCommentContent = '';\n    },\n\n    // 跳转到登录页（需根据实际路由调整）\n    gotoLogin() {\n      this.$router.push('/login'); // 假设登录页路由为 /login\n    },\n\n    // 提交评论\n    async submitComment() {\n      if (!this.currentUser) {\n        this.$message.warning('请先登录');\n        return;\n      }\n      if (!this.userRating || !this.userCommentContent.trim()) {\n        this.$message.warning('请完成评分和评论内容填写');\n        return;\n      }\n\n      this.commentSubmitting = true;\n      try {\n        // 组装提交参数\n        const submitData = {\n          movieId: this.currentMovie.movieId || this.currentMovie.id, // 电影ID\n          userId: this.currentUser.userid || this.currentUser.id, // 用户ID\n          rating: this.userRating, // 评分\n          content: this.userCommentContent.trim(), // 评论内容\n          commentTime: new Date().toISOString() // 评论时间（可根据后端要求调整格式）\n        };\n\n        // 调用后端提交评论接口（需根据实际接口调整URL和请求方式）\n        const response = await request.post('/movie/comment/submit', submitData);\n        if (response && response.code === 200) {\n          this.$message.success('评论提交成功！');\n          // 重置表单\n          this.resetCommentForm();\n          // 重新加载评论列表\n          await this.showDetailedMovieComments(this.currentMovie);\n        } else {\n          this.$message.error('评论提交失败：' + (response.msg || '服务器错误'));\n        }\n      } catch (error) {\n        console.error('提交评论失败:', error);\n        this.$message.error('评论提交失败，请稍后重试');\n      } finally {\n        this.commentSubmitting = false;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.movie-browse-container {\n  margin: 20px auto;\n  max-width: 1600px;\n  padding: 0 15px;\n}\n\n.movie-browse-container .el-container {\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.main-content {\n  padding: 0;\n  flex: 1;\n}\n\n.recommend-sidebar {\n  width: 350px !important;\n  padding: 0;\n  margin-left: 20px;\n}\n\n.recommend-sidebar .el-card {\n  height: calc(100vh - 120px);\n  margin: 0;\n  border-radius: 0 8px 8px 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.ai-recommend-card {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.ai-recommend-card .el-card__body {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n}\n\n.card-header {\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-controls {\n  display: flex;\n  align-items: center;\n}\n\n.ai-card-header {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  padding: 15px 20px;\n  border-bottom: 1px solid #eee;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.ai-card-header i {\n  color: #409EFF;\n}\n\n.movie-card {\n  margin-bottom: 25px;\n}\n\n.movie-item {\n  height: 400px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.movie-content {\n  padding: 20px;\n  height: calc(100% - 60px);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.movie-name {\n  font-size: 18px;\n  font-weight: 700;\n  color: #333;\n  margin-bottom: 15px;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  height: 48px;\n}\n\n.movie-metadata {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 15px;\n  flex-wrap: wrap;\n}\n\n.metadata-item {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 12px;\n  color: #666;\n  background: #f5f7fa;\n  padding: 4px 8px;\n  border-radius: 12px;\n}\n\n.movie-info {\n  margin-bottom: 15px;\n  height: 48px;\n  overflow: hidden;\n  flex-grow: 1;\n}\n\n.info-item {\n  margin-bottom: 8px;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.info-item strong {\n  color: #333;\n  font-weight: 600;\n}\n\n.director-names,\n.actor-names {\n  color: #666;\n}\n\n.movie-desc {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.6;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  margin-bottom: 20px;\n  height: 67px;\n  flex-grow: 1;\n}\n\n.movie-actions {\n  display: flex;\n  justify-content: space-between;\n  padding: 0 20px 20px;\n  gap: 10px;\n  margin-top: auto;\n}\n\n.action-button {\n  flex: 1;\n  border-radius: 8px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.action-button:hover {\n  transform: translateY(-1px);\n}\n\n.pagination-container {\n  margin-top: 30px;\n  text-align: center;\n}\n\n.comments-list {\n  max-height: 400px;\n  overflow-y: auto;\n  padding: 10px;\n  margin-top: 20px;\n}\n\n.comment-item {\n  margin-bottom: 15px;\n  border-radius: 8px;\n  border: 1px solid #ebeef5;\n}\n\n.comment-content p {\n  margin: 8px 0;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.no-comments {\n  text-align: center;\n  color: #999;\n  padding: 30px;\n  font-style: italic;\n}\n\n/* AI助手聊天区域样式 */\n.ai-chat-container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding: 0;\n}\n\n.chat-messages {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: #fafafa;\n  min-height: 300px;\n}\n\n.message-item {\n  display: flex;\n  margin-bottom: 15px;\n  align-items: flex-start;\n}\n\n.message-item.user {\n  flex-direction: row-reverse;\n}\n\n.message-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  margin-top: 3px;\n}\n\n.message-avatar.user {\n  background: #409EFF;\n  color: white;\n}\n\n.message-avatar.assistant {\n  background: #67C23A;\n  color: white;\n}\n\n.message-content {\n  max-width: calc(100% - 50px);\n  margin: 0 15px;\n}\n\n.message-content p {\n  margin: 0;\n  padding: 10px 15px;\n  border-radius: 18px;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.message-item.user .message-content p {\n  background: #409EFF;\n  color: white;\n  border-bottom-right-radius: 5px;\n}\n\n.message-item.assistant .message-content p {\n  background: white;\n  color: #333;\n  border: 1px solid #e0e0e0;\n  border-bottom-left-radius: 5px;\n}\n\n.input-area {\n  padding: 15px 20px;\n  border-top: 1px solid #eee;\n  background: white;\n}\n\n.send-button {\n  margin-top: 10px;\n  width: 100%;\n}\n\n.quick-actions {\n  padding: 0 20px 15px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  border-top: 1px solid #eee;\n  background: white;\n}\n\n.quick-actions .el-button {\n  padding: 6px 10px;\n  font-size: 12px;\n}\n\n.movie-detail-content h3 {\n  margin-top: 0;\n  color: #303133;\n  border-bottom: 1px solid #dcdfe6;\n  padding-bottom: 15px;\n}\n\n.movie-intro {\n  line-height: 1.6;\n  color: #606266;\n  white-space: pre-wrap;\n}\n\n/* ========== 新增：评论提交表单样式 ========== */\n.comment-submit-form {\n  margin-bottom: 20px;\n}\n\n.submit-card {\n  border: 1px solid #ebeef5;\n  border-radius: 8px;\n}\n\n.submit-card-header {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  padding: 15px 20px;\n  border-bottom: 1px solid #eee;\n}\n\n.submit-form-content {\n  padding: 20px;\n}\n\n.rating-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n  gap: 10px;\n}\n\n.form-label {\n  font-size: 14px;\n  font-weight: 600;\n  color: #333;\n  width: 80px;\n  flex-shrink: 0;\n}\n\n.rating-text {\n  font-size: 14px;\n  color: #666;\n  margin-left: 10px;\n}\n\n.comment-content-item {\n  margin-bottom: 15px;\n}\n\n.submit-button-group {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.login-tip {\n  margin-bottom: 20px;\n  padding: 15px;\n  text-align: center;\n}\n\n/* 响应式设计 */\n@media (max-width: 1200px) {\n  .recommend-sidebar {\n    width: 300px !important;\n    margin-left: 15px;\n  }\n}\n\n@media (max-width: 992px) {\n  .recommend-sidebar {\n    display: none;\n  }\n\n  .movie-browse-container {\n    max-width: 100%;\n  }\n\n  .header-controls {\n    flex-direction: column;\n    align-items: flex-end;\n  }\n}\n\n@media (max-width: 768px) {\n  .movie-card {\n    margin-bottom: 20px;\n  }\n\n  .movie-card-header {\n    height: 180px;\n  }\n\n  .movie-content {\n    padding: 15px;\n  }\n\n  .movie-name {\n    font-size: 16px;\n  }\n\n  .movie-actions {\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .action-button {\n    width: 100%;\n  }\n\n  .card-header {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .header-controls {\n    width: 100%;\n    margin-top: 10px;\n  }\n\n  .el-select {\n    width: 100%;\n  }\n\n  /* 响应式调整评论表单 */\n  .rating-item {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 5px;\n  }\n\n  .form-label {\n    width: 100%;\n    margin-bottom: 5px;\n  }\n}\n\n@media (max-width: 480px) {\n  .movie-browse-container {\n    margin: 10px;\n    padding: 0 5px;\n  }\n\n  .movie-metadata {\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .card-header {\n    padding: 15px;\n  }\n}\n</style>\n"]}]}